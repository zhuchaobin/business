<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport" />
<title>执行中长约-发起订单</title>
<link rel="stylesheet"
	th:href="@{/resources/bootstrap/css/bootstrap.min.css}" />
<link rel="stylesheet"
	th:href="@{/resources/dist/css/skins/_all-skins.css}" />
<link rel="stylesheet" th:href="@{/resources/dist/css/AdminLTE.min.css}" />
<link rel="stylesheet"
	th:href="@{/resources/dist/css/font-awesome.min.css}" />
<link rel="stylesheet" th:href="@{/resources/dist/css/ionicons.min.css}" />
<link rel="stylesheet"
	th:href="@{/resources/plugins/bootstrapValidator/bootstrapValidator.min.css}" />
<link rel="stylesheet" th:href="@{/resources/e7/css/e7-0.2.css}" />
<link rel="stylesheet"
	th:href="@{/resources/e7/e7table/e7table-0.2.css}" />
<link rel="stylesheet"
	th:href="@{/resources/adminlte/dist/css/AdminLTE.css}" />
<link rel="stylesheet"
	th:href="@{/resources/adminlte/bootstrap/css/bootstrap.min.css}" />
<link rel="stylesheet"
	th:href="@{/resources/adminlte/plugins/iCheck/all.css}" />
<link rel="stylesheet" th:href="@{/resources/style.css}" />
<link rel="stylesheet"
	th:href="@{/resources/dist/kl-iconfont/iconfont.css}" />
<link rel="stylesheet"
	th:href="@{/resources/plugins/datetimepicker/css/bootstrap-datetimepicker.min.css}" />
<style type="text/css">
.btn_small {
	display: inline-block;
	padding: 1px 10px;
	margin-bottom: 0;
	font-size: 14px;
	font-weight: 400;
	line-height: 1.42857143;
	text-align: center;
	white-space: nowrap;
	vertical-align: middle;
	-ms-touch-action: manipulation;
	touch-action: manipulation;
	cursor: pointer;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	background-image: none;
	border: 1px solid transparent;
	border-radius: 4px;
}
</style>
<!-- 页面背景图片 -->
<style type="text/css">
body {
	padding: 0;
	margin: 0;
	background: url(/resources/dist/img/page_bg.png) no-repeat;
	width: 100%;
	background-size: cover;
}
</style>
<link rel="stylesheet" th:href="@{/resources/css_zcb/common.css}" />
<!-- 自定义按钮样式 -->
<link rel="stylesheet" th:href="@{/resources/css_zcb/button.css}" />
<!-- bootstrap表格 -->
<!-- <link rel="stylesheet" th:href="@{/resources/bootstrap-table/bootstrap-table.css}" /> -->
<link rel="stylesheet"
	th:href="@{/resources/bootstrap/css/bootstrap-table.min.css}" />
	
	<link rel="stylesheet" th:href="@{/resources/bootstrap/css/bootstrap-select.min.css}" />
<!-- 时间轴流程图 -->
<link rel="stylesheet" th:href="@{/resources/css_zcb/step/css/step.css}" />
	
</head>
<body>
	<!-- 列表查询 start-->
	<section id="main_search_detail" class="content">
		<!-- 条件查询 -->
		<div class="box box-info">
			<!-- 条件区域 -->
			<div class="box-body" style="padding-bottom: 0px;">
				<form id="frm_query" class="form-horizontal">
					<div id="div_criteria" class="flowlayout">
					
						<div class="col-md-4">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">长约编号：</label>
								<div class="col-sm-8">
									<input type="hidden" id="queryTypeId" name="queryType">
									<input id="arId" name="arId" class="form-control"
										placeholder="长约编号" />
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">供应链：</label>
								<div class="col-sm-8">
									<select name="splchainCo" class="form-control">
										<option value="">请选择</option>
										<option th:each="model: ${splchainCoModels}"
											th:value="${model.id}" th:text="${model.name}"></option>
									</select>
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">融资企业：</label>
								<div class="col-sm-8">
									<select name="fncEntp" class="form-control">
										<option value="">请选择</option>
										<option th:each="model: ${fncEntpModels}"
											th:value="${model.id}" th:text="${model.name}"></option>
									</select>
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">供应商：</label>
								<div class="col-sm-8">
									<select name="ustrmSplr" class="form-control">
										<option value="">请选择</option>
										<option th:each="model: ${ustrmSplrModels}"
											th:value="${model.id}" th:text="${model.name}"></option>
									</select>
								</div>
							</div>
						</div>

						<div class="col-md-4" style="display: none;">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">长约状态：</label>
								<div class="col-sm-8">

									<select name="arSt" class="form-control">
										<option value="">全部</option>
										<!-- 								<option  th:each="user: ${catalogList}" th:value="${user.id}"><div th:text="${user.catalogName}"/></option> -->
										<option value="01">发起</option>
										<option value="02">确认(供应链)</option>
										<option value="03">确认(融资企业)</option>
										<option value="04">承保</option>
										<option value="05">一审</option>
										<option value="06">二审</option>
										<option value="07">终止</option>
									</select>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">关键字：</label>
								<div class="col-sm-8">
									<input id="keyWorlds" name="keyWorlds" class="form-control"
										placeholder="搜索关键字" />
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>

			<!-- 按钮区域 -->
			<div id="div_buttons" class="box-footer"></div>
		</div>

		<!-- 信息列表 -->
		<div class="row">
			<div class="col-xs-12">
				<div class="box box-info">
					<div class="box-body table-responsive no-padding">
						<table id="tbl_query" class="table table-hover"></table>
					</div>
				</div>
			</div>
		</div>

	</section>
	<!-- 列表查询 end-->
	<!-- 详细信息 start-->
	<section id="main_edit_detail" class="content" style="display: none;">
		<div id="main_edit_detail_clapse" class="box box-info">
			<div class="box-header with-border">
				<h4 id="main_edit_detail_title" class="text-info">长约信息</h4>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse">
						<i id="main_edit_detail_li" class="fa fa-minus"></i>
					</button>
				</div>
			</div>
		<div class="box-body">
				<form id="frm_detail" class="form-horizontal">
					<fieldset id='fld_detail'>
						<div class="w-z-info">
							<input type="hidden" id="fileId" name="fileUrl"> <input
								type="hidden" id="fileToDeleteId" name="filesToDelete">
							<input name="id" type="hidden" value="" /> <input name="arId"
								type="hidden" value="" />
							<div class="row" style="margin-left: 0px" id="长约类型_div">
								<div class="col-md-6">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">长约类型：</label>
										<div class="col-sm-8">
											<input type="radio" name="arTp" value="01" checked="checked">
											代销</input> &nbsp<input type="radio" name="arTp" value="02">
											代采</input> &nbsp<input type="radio" name="arTp" value="03">
											全流程</input>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="供应链公司_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">供应链公司：</label>
									<div class="col-sm-8">
										<select name="splchainCo" class="form-control">
											<option value="">请选择</option>
											<option th:each="model: ${splchainCoModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="融资企业_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">融资企业：</label>
									<div class="col-sm-8">
										<select name="fncEntp" class="form-control">
											<option value="">请选择</option>
											<option th:each="model: ${fncEntpModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="供应商_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">供应商：</label>
									<div class="col-sm-8">
										<select name="ustrmSplr" class="form-control">
											<option value="">请选择</option>
											<option th:each="model: ${ustrmSplrModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="银行_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">银行：</label>
									<div class="col-sm-8">
										<select name="bnk" class="form-control">
											<option value="">请选择</option>
											<option th:each="model: ${bnkModels}" th:value="${model.id}"
												th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="物流公司_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">物流公司：</label>
									<div class="col-sm-8">
										<select name="lgstcCo" class="form-control">
											<option value="">请选择</option>
											<option th:each="model: ${lgstcCoModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="仓储公司_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">仓储公司：</label>
									<div class="col-sm-8">
										<select name="stgco" class="form-control">
											<option value="">请选择</option>
											<option th:each="model: ${stgcoModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="长约起止日期_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">长约起止日期：</label>
									<div class="col-sm-8 pull-right">
										<div class="col-xs-5" style="padding: 0px;">
											<input name="arStdt" id="arStdtDTPicker" class="form-control"
												style="padding-left: 3px;" placeholder="开始日期" />
										</div>
										<div class="col-xs-1 ">
											<label for="" class="control-label">- </label>
										</div>
										<div class="col-xs-5" style="padding: 0px;">
											<input name="arEddt" id="arEddtDTPicker" class="form-control"
												style="padding-left: 3px;" placeholder="结束日期" />
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6 " id="提货周期_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">提货周期：</label>
									<div class="col-sm-8 pull-right">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="pckupgdsCyc" class="form-control"
												placeholder="提货周期" value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">天</label>
										</div>
									</div>
								</div>
							</div>

							<div class="col-md-6" id="业务类型_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">业务类型：</label>
									<div class="col-sm-8">
										<select name="btp" class="form-control">
											<option value="">-请选择-</option>
											<option value="01" checked="checked">订单融资</option>
											<option value="02">保证金融资</option>
											<option value="03">质押融资</option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="保证金比例_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">保证金比例：</label>
									<div class="col-sm-8 pull-right">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="fncPctg" class="form-control" placeholder="保证金比例"
												value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">%</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="预付金_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">预付金：</label>
									<div class="col-sm-8">
											<input name="prpyGldRto" class="form-control"
												placeholder="预付金" value="2" />
									</div>
								</div>
							</div>
							<div class="col-md-6" id="额度_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">额度：</label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="lmt" class="form-control" placeholder="额度"
												value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">元</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="预警线_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">预警线：</label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="wnln" class="form-control" placeholder="预警线"
												value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">%</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="警戒线_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">警戒线：</label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="crdn" class="form-control" placeholder="警戒线"
												value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">%</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="平仓线_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">平仓线：</label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="clsposLn" class="form-control" placeholder="平仓线"
												value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">%</label>
										</div>
									</div>
								</div>
							</div>

							<div class="col-md-6" id="服务费收取_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">服务费收取：</label>
									<div class="col-sm-8">
										<select name="svcfeeCmd" class="form-control">
											<option value="">-请选择-</option>
											<option value="01" checked="checked">预收</option>
											<option value="02">现结</option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="溢短结转方式_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">溢短结转方式：</label>
									<div class="col-sm-8">
										<select name="splovCrrovMod" class="form-control">
											<option value="">-请选择-</option>
											<option value="01" checked="checked">多退少补</option>
											<option value="02">结转下月</option>
										</select>
									</div>
								</div>
							</div>
							<!-- 保险信息部分，根据需要显示 -->
							<div class="row" style="margin-left: 0px" id="投保_div">
								<div class="col-md-6" >
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">投保：</label>
										<div class="col-sm-8">
											<input type="radio"
												onClick="return show_or_hide_ins_div(true)" name=isNeedIns
												value="1" selected=""> 新投保</input> &nbsp<input type="radio"
												onClick="return show_or_hide_ins_div(true)" name="isNeedIns"
												value="0" selected=""> 批改</input>
										</div>
									</div>
								</div>
								<div class="col-md-6"></div>
							</div>
							<!-- 保险信息div -->
							<div id="ins_div" style="padding: 0px; display: none;" >
								<div class="col-md-6" id="保险公司_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">保险公司：</label>
										<div class="col-sm-8">
											<select name="insCo" class="form-control">
												<option value="">请选择</option>
												<option th:each="model: ${insCoModels}"
													th:value="${model.id}" th:text="${model.name}"></option>
											</select>
										</div>
									</div>
								</div>
								<div class="col-md-6" id="投保人_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">投保人：</label>
										<div class="col-sm-8">
											<input name="plchd" class="form-control" placeholder="投保人"
												value="2" />
										</div>
									</div>
								</div>

								<div class="col-md-6" id="投保人地址_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">投保人地址：</label>
										<div class="col-sm-8">
											<input name="plchdAdr" class="form-control"
												placeholder="投保人地址" value="2" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="被保险人_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">被保险人：</label>
										<div class="col-sm-8">
											<input name="insrd" class="form-control" placeholder="被保险人"
												value="2" />
										</div>
									</div>
								</div>

								<div class="col-md-6" id="被保险人地址_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">被保险人地址：</label>
										<div class="col-sm-8">
											<input name="insrdAdr" class="form-control"
												placeholder="被保险人地址" value="2" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="第一受益人_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">第一受益人：</label>
										<div class="col-sm-8">
											<input name="fstBenf" class="form-control"
												placeholder="第一受益人" value="2" />
										</div>
									</div>
								</div>

								<div class="col-md-6" id="第一受益人地址_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">第一受益人地址：</label>
										<div class="col-sm-8">
											<input name="fstBenfAdr" class="form-control"
												placeholder="第一受益人地址" value="2" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="保险财产地址_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">保险财产地址：</label>
										<div class="col-sm-8">
											<input name="insPtyAdr" class="form-control"
												placeholder="保险财产地址" value="2" />
										</div>
									</div>
								</div>

								<div class="col-md-6" id="保险标的名称_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">保险标的名称：</label>
										<div class="col-sm-8">
											<input name="insObjNm" class="form-control"
												placeholder="保险标的名称" value="2" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="保险金额_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">保险金额：</label>
										<div class="col-sm-8">
											<div class="col-xs-10" style="padding-left: 0px;">
												<input name="insAmt" class="form-control" placeholder="保险金额"
													value="2" />
											</div>
											<div class="col-xs-1">
												<label for="" class="control-label">元</label>
											</div>
										</div>
									</div>
								</div>

								<div class="col-md-6" id="免赔额_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">免赔额：</label>
										<div class="col-sm-8">
											<div class="col-xs-10" style="padding-left: 0px;">
												<input name="dctbAmt" class="form-control" placeholder="免赔额"
													value="2" />
											</div>
											<div class="col-xs-1">
												<label for="" class="control-label">元</label>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6" id="保险起止日期_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">保险起止日期：</label>
										<div class="col-sm-8">
											<div class="col-xs-5" style="padding: 0px;">
												<input name="insStdt" id="insStdtDTPicker"
													style="padding-left: 3px;" class="form-control"
													placeholder="开始日期" />
											</div>
											<div class="col-xs-1">
												<label for="" class="control-label">-</label>
											</div>
											<div class="col-xs-5" style="padding: 0px;">
												<input name="insEddt" id="insEddtDTPicker"
													style="padding-left: 3px;" class="form-control"
													placeholder="结束日期" />
											</div>
										</div>
									</div>
								</div>

								<div class="row" id="特别约定_div">
									<div class="col-md-12" style="padding-right: 15px;">
										<div class="form-group" style="padding-left: 15px;">
											<label for="" class="col-md-2 control-label"
												style="padding-left: 15px;">特别约定：</label>
											<div class="col-md-10" style="padding-left: 10px;">
												<textarea name="epap" rows="4" class="form-control" margin></textarea>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="row" id="query_ar_atch_div" >
								<div class="col-md-12">
									<div class="form-group">
										<label for="" class="col-sm-2 control-label"></label>
										<div class="col-sm-10">
											<div class="w-z-docx">
												<div class="w-z-d-title">附件</div>
												<div class="w-z-d-list">
													<div class="row" align="center">
														<div id="upload_atch_div"></div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="row" id="upload_ar_div" >
								<div class="col-md-12">
									<div class="form-group">
										<label for="" class="col-sm-2 control-label">附件:</label>
										<div class="col-sm-10">
											<form id="frm_transfer" class="form-horizontal"
												enctype="multipart/form-data" method="post">
												<div id="fujianId"></div>
											</form>
											<div class="modal-footer">
												<button id="btn_save2" type="button"
													class="btn btn-primary-red"
													onclick="javascript:addInputItem(1);">
													<i class="glyphicon glyphicon-plus"></i>新增附件
												</button>
												<button id="btn_save1" type="button"
													class="btn btn-primary-red"
													onclick="javascript:submitTransferFile(1);">
													<i class="glyphicon glyphicon-upload"></i>上传
												</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</fieldset>
				</form>
			</div>
			<div class="box-footer">
				<button id="btn_save" type="button"
					class="btn btn-primary pull-right"
					onclick='javascript:validate_frm_detail();'>确定</button>
				<button id="btn_close" type="button"
					class="btn btn-default pull-right"
					onclick='javascript:showOrHideDetail(true, 1);'
					style="margin-right: 15px;">取消</button>
			</div>
		</div>
	</section>
	<!-- 详细信息 end-->

	<!-- 长约流转信息 start-->
	<section id="ar_lnk_jrnl_inf_detail" class="content"
		style="display: none;">
		<div id="ar_lnk_jrnl_inf_detail_clapse_box" class="box box-info">
			<div class="box-header with-border">
				<h4 id="ar_lnk_jrnl_inf_detail_title" class="text-info">长约流转信息</h4>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse">
						<i id="ar_lnk_jrnl_inf_detail_li" class="fa fa-minus"></i>
					</button>
				</div>
			</div>
			<div class="box-body">
				<form id="frm_detail3" class="form-horizontal">
					<fieldset id='fld_detail3'>
						<div class="w-z-info">
						<!-- // 流程图 -->
						<div class="steps"></div>
							<!-- 环节流水信息列表 -->
							<div class="row">
								<div class="col-xs-12">
									<div class="box box-info">
										<div class="box-body table-responsive no-padding">
											<div id="lnk_jrnl_inf_tbl_div"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</fieldset>
				</form>
			</div>
			<!-- 			<div class="box-footer">
			</div> -->
		</div>
	</section>
	<!-- 长约流转信息 end-->


	<!-- 提交结论 start-->
	<section id="submit_ar_detail" class="content" style="display: none;">
		<div class="box box-info">
			<div class="box-header with-border">
				<h4 id="submit_ar_detail_title" class="text-info">提交结论</h4>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse">
						<i class="fa fa-minus"></i>
					</button>
				</div>
			</div>
			<div class="box-body">
				<form id="frm_submit_ar" class="form-horizontal">
					<input type="hidden" id="fileId2" name="fileUrl2">
					<div class="row">
						<div class="col-md-9">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">结论<span
									style="color: red">*</span></label>
								<div class="col-sm-8">
									<input type="radio" name="aplyPsrltCd" id="aplyPsrltCd"
										value="01" selected=""> 通过</input> &nbsp&nbsp&nbsp&nbsp<input
										type="radio" name="aplyPsrltCd" id="aplyPsrltCd" value="02"
										selected=""> 退回</input> <input name="arId"
										class="form-control" placeholder="" value="" type="hidden" />
									<input name="aplyPcstpCd" id="aplyPcstpCd" class="form-control"
										placeholder="" value="" type="hidden" />
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-9">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">备注</label>
								<div class="col-sm-8">
									<!-- <input name="maintenanceContent" class="form-control"/> -->
									<textarea name="rmrk" rows="4" class="form-control"></textarea>
								</div>
							</div>
						</div>
					</div>
					<div class="row" id="submmit_ar_upload_ar_div">
						<div class="col-md-9">
							<div class="form-group">
								<label for="" class="col-sm-4 control-label">附件</label>
								<div class="col-sm-8">
									<form id="frm_transfer" class="form-horizontal"
										enctype="multipart/form-data" method="post">
										<div id="fujianId2"></div>
									</form>
									<div class="modal-footer">
										<button id="btn_save2" type="button"
											class="btn btn-primary-red"
											onclick="javascript:addInputItem(2);">
											<i class="glyphicon glyphicon-plus"></i>新增附件
										</button>
										<button id="btn_save1" type="button"
											class="btn btn-primary-red"
											onclick="javascript:submitTransferFile(2);">
											<i class="glyphicon glyphicon-upload"></i>上传
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="box-footer">
						<button id="btn_close" type="button"
							class="btn btn-primary-gray  pull-right"
							onclick='javascript:showOrHideDetail(true, 1);'
							style="margin-right: 15px;">
							<i class="glyphicon glyphicon-remove-sign"></i>取消
						</button>
						<button id="btn_submit_ar" type="button"
							class="btn btn-primary-red  pull-right"
							onclick='javascript:validate_frm_submit_ar()'
							style="margin-right: 10px;">
							<i class="glyphicon glyphicon-ok-sign"></i>确定
						</button>
					</div>
				</form>
			</div>
		</div>
	</section>
	<!-- 提交结论 end-->
<!-- 查看界面的返回按钮 start-->
<div id="btn_close_div" style="z-index: 9999; position: fixed ! important; right: 80px; top: 25px; display: none; opacity:0.65">
	<table width=""100% style="position: absolute; width:260px; right: 0px; top: 0px;">
			<button id="btn_close_detail" type="button"
				class="btn btn-success pull-right btn-lg"
				onclick='javascript:showOrHideDetail(true, 1);'
				style="margin-right: 15px;">
				<i class="glyphicon glyphicon-arrow-left"></i> 返 回
			</button>
	</table>
</div>
<!-- 查看界面的返回按钮 end-->

	<!-- 查询长约提交详细信息 start-->
	<section id="query_ar_submmit_detail" style="display: none;">
		<div class="box box-info">
			<div class="box-header with-border">
				<h3 id="query_ar_submmit_title" class="box-title">长约提交详情</h3>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse">
						<i class="fa fa-minus"></i>
					</button>
				</div>
			</div>
			<div class="box-body">
				<form id="frm_detail2" class="form-horizontal">
					<fieldset id='fld_detail'>
						<div class="w-z-info">
							<div class="col-md-12 col-md-offset-2">
								<div class="row">
									<div class="col-sm-6">
										<h5 id="submmitUsername"></h5>
									</div>
									<div class="col-sm-6">
										<h5 id="companyName"></h5>
									</div>
								</div>
							</div>

							<div class="col-md-12 col-md-offset-2">
								<div class="row">
									<div class="col-sm-6">
										<h5 id="aplyPcstpCdDesc"></h5>
									</div>
									<div class="col-sm-6">
										<h5 id="aplyPsrltCdDesc"></h5>
									</div>
								</div>
							</div>
							<div class="col-md-12 col-md-offset-2">
								<div class="row">
									<div class="col-sm-6">
										<h5 id="lnkEdtm"></h5>
									</div>
								</div>
							</div>
							<div class="col-md-12 col-md-offset-2">
								<div class="row">
									<div class="col-sm-6">
										<h5 id="rmrkDesc"></h5>
									</div>
								</div>
							</div>
							<div class="row" id="query_ar_atch_div2">
								<div class="col-md-12">
									<div class="form-group">
										<label for="" class="col-sm-2 control-label"></label>
										<div class="col-sm-8">
											<div class="w-z-docx">
												<div class="w-z-d-title">附件</div>
												<div class="w-z-d-list">
													<div class="row" align="center">
														<div id="upload_atch_div2"></div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</fieldset>
				</form>
			</div>
			<div class="box-footer">
				<button id="btn_close_return3" type="button"
					class="btn btn-primary-gray pull-right"
					onclick='javascript:showOrHideDetail(false, 3);'
					style="margin-right: 15px;">
					<i class="glyphicon glyphicon-repeat"></i>返回
				</button>
				<button id="btn_close_return4" type="button"
					class="btn btn-primary-gray pull-right"
					onclick='javascript:showOrHideDetail(false, 4);'
					style="margin-right: 15px;">
					<i class="glyphicon glyphicon-repeat"></i>返回
				</button>
			</div>
		</div>
	</section>
	<!-- 查询长约提交详细信息 end-->

	<!-- 发起确认提示框 start-->
	<div class="modal fade" id="saveSubmitModal" tabindex="-1"
		role="dialog" aria-labelledby="submitModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header" align="center">
					<h4 class="modal-title">友情提示</h4>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" align="center">提交后将自动流转到[供应链确认]，若需修改需要下一环节退回，确定提交吗?</div>
				<div class="modal-footer" align="center">
					<button type="button" onclick="javascript:save()" class="btn"
						data-dismiss="modal">确定</button>
					<button type="button" class="btn" data-dismiss="modal">取消</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- 发起确认提示框 end -->
	<!-- 长约提交确认提示框 start -->
	<div class="modal fade" id="submitArModal" tabindex="-1" role="dialog"
		aria-labelledby="submitModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header" align="center">
					<h4 class="modal-title">友情提示</h4>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" align="center" id="saveSubmitModalTips">提交后将自动流转到下一环节，若需修改需要下一环节退回，确定提交吗?</div>
				<div class="modal-footer" align="center">
					<button type="button" onclick="javascript:submitAr()" class="btn"
						data-dismiss="modal">确定</button>
					<button type="button" class="btn" data-dismiss="modal">取消</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- 长约提交确认提示框 end -->

	<!-- 发起订单确认提示框 start-->
	<div class="modal fade" id="saveOrderSubmitModal" tabindex="-1"
		role="dialog" aria-labelledby="submitModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header" align="center">
					<h4 class="modal-title">友情提示</h4>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" align="center">提交后将自动流转到[平台审核]，若需修改需要下一环节退回，确定提交吗?</div>
				<div class="modal-footer" align="center">
					<button type="button" onclick="javascript:saveOrder(2)" class="btn"
						data-dismiss="modal">确定</button>
					<button type="button" class="btn" data-dismiss="modal">取消</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- 发起订单确认提示框 end -->

	<!-- 订单详细信息 start-->	
	<section id="main_order_edit_detail" class="content"
		style="display: none;">
		<div class="box box-info">
			<div class="box-header with-border">
				<h4 id="main_order_edit_detail_title" class="text-info">订单信息</h4>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse">
						<i class="fa fa-minus"></i>
					</button>
				</div>
			</div>
			<div class="box-body">
				<form id="frm_detail_order" class="form-horizontal">
					<fieldset id='fld_detail'>
						<div class="w-z-info">
							 <input
								type="hidden" id="fileToDeleteId3" name="filesToDelete3">
							<input name="id" type="hidden" value="" /> <input id="secSrvCd"
								name="secSrvCd" type="hidden" value="" /> <input id="arSt"
								name=arSt type="hidden" value="" />
							<div class="col-md-6" id="长约编号_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">长约编号<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="arId" class="form-control" placeholder="长约编号"
											disabled="disabled" />
									</div>
								</div>
							</div>

							<div class="col-md-6" id="业务类型_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">业务类型<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="btp" class="form-control" disabled="disabled">
											<option value="">-请选择-</option>
											<option value="01" selected="selected">订单融资</option>
											<option value="02">保证金融资</option>
											<option value="03">质押融资</option>
										</select>
									</div>
								</div>
							</div>

							<div class="col-md-6" id="融资企业_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">融资企业<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="fncEntp" class="form-control"
											disabled="disabled">
											<option value="">请选择</option>
											<option th:each="model: ${fncEntpModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="供应商_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">供应商<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="ustrmSplr" class="form-control"
											disabled="disabled">
											<option value="">请选择</option>
											<option th:each="model: ${ustrmSplrModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="仓储公司_div">
							<div class="form-group">
									<label for="" class="col-sm-4 control-label">仓储公司<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="stgco" class="form-control" disabled="disabled">
											<option value="">请选择</option>
											<option th:each="model: ${stgcoModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="订单起止日期_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">订单起止日期<span
										style="color: red">*</span></label>
									<div class="col-sm-8 pull-right">
										<div class="col-xs-5" style="padding: 0px;">
											<input name="ordrStdt" id="ordrStdtDTPicker"
												class="form-control" style="padding-left: 3px;"
												placeholder="开始日期" value="2018-12-12" />
										</div>
										<div class="col-xs-1 ">
											<label for="" class="control-label">- </label>
										</div>
										<div class="col-xs-5" style="padding: 0px;">
											<input name="ordrEddt" id="ordrEddtDTPicker"
												class="form-control" style="padding-left: 3px;"
												placeholder="结束日期" value="2018-12-12" />
										</div>
									</div>
								</div>
							</div>

			 				<div class="col-md-6" id="合同编号_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">合同编号</label>
										<div class="col-sm-8">
											<input name="ctrId" class="form-control" placeholder="合同编号" />
										</div>
									</div>
								</div>
								
							<div class="col-md-6" id="采购货款总额_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">采购货款总额<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="pchPymfrgdsTamt" id="pchPymfrgdsTamt"  class="form-control"
												placeholder="采购货款总额" disabled="disabled" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">元</label>
										</div>
									</div>
								</div>
							</div>
							<!-- <div class="col-md-6" id="融资金额_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">融资金额<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<div class="col-xs-4" style="padding-left: 0px;">
											<input name="fncRto" id="fncRto" class="form-control" placeholder="融资比率"
												value="4" onchange="fncRto_change()"/>
										</div>
										<div class="col-xs-2">
											<label for="" class="control-label">%</label>
										</div>
										<div class="col-xs-4" style="padding-left: 0px;">
											<input name="fncAmt" id="fncAmt" class="form-control" placeholder="融资金额"
												value="2" />
										</div>
										<div class="col-xs-2">
											<label for="" class="control-label">元</label>
										</div>

									</div>
								</div>
							</div> -->
							<div class="col-md-6" id="保证金比例_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">保证金比例<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
											<input name="fncPctg" id="fncPctg" class="form-control" placeholder="保证金比例"
												value="2" disabled="disabled"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="融资额度_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">融资额度<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
											<input name="fncAmt" id="fncAmt" class="form-control" placeholder="融资额度"
												value="2" onchange="fncAmt_change()"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="保证金_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">保证金<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
											<input name="fncRto" id="fncRto" class="form-control" placeholder="保证金"
												value="" disabled="disabled"/>
									</div>
								</div>
							</div>
<!-- 							<div class="col-md-6" id="合同总额_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">合同总额<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="ctrTamt" class="form-control" placeholder="合同总额"
												value="2" disabled="disabled" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">元</label>
										</div>
									</div>
								</div>
							</div> -->
							<div class="col-md-6" id="预付金_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">预付金<span
										style="color: red">*</span></label>
									<div class="col-sm-8">

								<!-- 		<div class="col-xs-10" style="padding-left: 0px;"> -->
											<input name="prpyGldRto" class="form-control"
												placeholder="预付金" value="2" />
								<!-- 		</div> -->
<!-- 										<div class="col-xs-1">
											<label for="" class="control-label">%</label>
										</div> -->
									</div>
								</div>
							</div>

							<div class="col-md-6" id="溢短结转方式_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">溢短结转方式<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="splovCrrovMod" class="form-control"
											placeholder="溢短结转方式" />
									</div>
								</div>
							</div>

							<div class="col-md-6" id="付款方式_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">付款方式<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select id="pymtmod" name="pymtmod" class="form-control"
											onchange="pymtmod_change()">
											<option value="" selected="selected">-请选择-</option>
											<option value="01">全额预付</option>
											<option value="02">见货付款</option>
											<option value="03">货到付款</option>
										</select>
									</div>
								</div>
							</div>
							<!-- 保险信息div -->
							<div id="ins_order_div" style="padding: 0px; display: none;">
								<div class="col-md-6" id="货物名称_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">货物名称<span
											style="color: red">*</span></label>
										<div class="col-sm-8">
											<input name="gdsNm" class="form-control" placeholder="货物名称" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="保险金额_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">保险金额<span
											style="color: red">*</span></label>
										<div class="col-sm-8">
											<div class="col-xs-10" style="padding-left: 0px;">
												<input name="insAmt" class="form-control" placeholder="保险金额"
													value="2" />
											</div>
											<div class="col-xs-1">
												<label for="" class="control-label">元</label>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6" id="免赔额_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">免赔额<span
											style="color: red">*</span></label>
										<div class="col-sm-8">
											<div class="col-xs-10" style="padding-left: 0px;">
												<input name="dctbAmt" class="form-control" placeholder="免赔额"
													value="2" />
											</div>
											<div class="col-xs-1">
												<label for="" class="control-label">元</label>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6" id="起运日期_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">起运日期<span
											style="color: red">*</span></label>
										<div class="col-sm-8">
											<input name="tprtDt" id="tprtDtDTPicker" class="form-control"
												style="padding-left: 3px;" placeholder="起运日期"
												value="2018-12-12" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="目的地_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">目的地<span
											style="color: red">*</span></label>
										<div class="col-sm-8">
											<input name="ppsLnd" class="form-control" placeholder="目的地" />
										</div>
									</div>
								</div>
								<div class="col-md-6" id="运输方式及工具_div">
									<div class="form-group">
										<label for="" class="col-sm-4 control-label">运输方式及工具<span
											style="color: red">*</span></label>
										<div class="col-sm-8">
											<input name="tprtModAndImt" class="form-control"
												placeholder="运输方式及工具" />
										</div>
									</div>
								</div>
								<div class="row" id="特别约定_div">
									<div class="col-md-12" style="padding-right: 15px;">
										<div class="form-group" style="padding-left: 15px;">
											<label for="" class="col-md-2 control-label"
												style="padding-left: 15px;">特别约定<span
												style="color: red">*</span></label>
											<div class="col-md-10" style="padding-left: 10px;">
												<textarea name="epap" rows="4" class="form-control" margin>rerere</textarea>
											</div>
										</div>
									</div>
								</div>
							</div>


														
							<input type="hidden" id="fileId3" name="fileUrl3">
							
							<div class="row" id="upload_order_div" >
								<div class="col-md-12" style="padding-right: 15px;">
									<div class="form-group" style="padding-left: 15px;">
										<label for="" class="col-sm-2 control-label" style="padding-left: 15px;">订单附件<span
											style="color: red">*</span></label>
										<div class="col-sm-10" style="padding-left: 10px;">
											<form id="frm_transfer" class="form-horizontal"
												enctype="multipart/form-data" method="post">
												<div id="fujianId3"></div>
											</form>
											<div class="modal-footer">
												<button id="btn_save2" type="button"
													class="btn btn-primary-red"
													onclick="javascript:addInputItem(3);">
													<i class="glyphicon glyphicon-plus"></i>新增附件
												</button>
												<button id="btn_save1" type="button"
													class="btn btn-primary-red"
													onclick="javascript:submitTransferFile(3);">
													<i class="glyphicon glyphicon-upload"></i>上传
												</button>
											</div>
										</div>
									</div>
								</div>
							</div>
							
							<div class="col-md-12" style="padding-right: 15px;">
							<!-- 订单明细部分 -->
							<button type="button" class="btn btn-primary-gray btn-lg pull-right" data-toggle="modal"   onclick="showOrderDetailModal()" style="margin-right:15px;"><i class="glyphicon glyphicon-th"></i>订单明细</button>
							</div>
							
							<div class="col-md-12" style="padding-right: 15px; padding-top: 10px; display:none;" id="boot_table_div">
								<table id="boot-table"  align="center" data-toggle="table" class="table table-hover" name="area" style="table-layout:fixed">
									<thead>
									<tr bgcolor="#337AB7">
										<th style="border-bottom: none;" data-field="ids">序号</th>
										<th style="border-bottom: none;" data-field="pdNm">品名</th>
										<th style="border-bottom: none;" data-field="spec">规格</th>
										<th style="border-bottom: none;" data-field="modl">型号</th>
										<th style="border-bottom: none;" data-field="qlyStd">质量标准</th>
										<th style="border-bottom: none;" data-field="brnd">品牌</th>
										<th style="border-bottom: none;" data-field="pdFctr">生产厂家</th>
										<th style="border-bottom: none;" data-field="num">数量</th>
										<th style="border-bottom: none;" data-field="msunit">计量单位</th>
										<th style="border-bottom: none;" data-field="pchUnitprc">采购单价</th>
										<th style="border-bottom: none;" data-field="txnPrcdif">交易差价</th>
										<th style="border-bottom: none;" data-field="saleTntvPrc">销售暂定价</th>
										<th style="border-bottom: none;" data-field="pdId">品名id</th>
										<th style="border-bottom: none;" data-field="operation" formatter="operateFormatter">操作</th>
					<!-- 					<th style="border-bottom: none;" data-field="operation" formatter="operateFormatter">删除</th> -->
									</tr>
									</thead>
										<!-- <tbody class="list">
									</tbody> -->
								</table>
							</div>
							
						</div>
			</fieldset>
			</form>
		</div>
		<div class="box-footer">
			<button id="btn_close" type="button"
				class="btn btn-primary-gray pull-right "
				onclick='javascript:showOrHideDetail(true, 1);'
				style="margin-right: 15px;">
				<i class="glyphicon glyphicon-remove-sign"></i>取消
			</button>
			<button id="btn_save" type="button"
				class="btn btn-primary-red pull-right"
				onclick='javascript:validate_order_edit_detail(2);'
				style="margin-right: 5px;">
				<i class="glyphicon glyphicon-floppy-disk"></i>保存
			</button>
			<button id="btn_save_submmit" type="button"
				class="btn btn-primary-red pull-right"
				onclick='javascript:validate_order_edit_detail(1);'
				style="margin-right: 5px;">
				<i class="glyphicon glyphicon-ok-sign"></i>提交
			</button>
		</div>
		</div>
	</section>
	<!-- 详细信息 end-->
	
	
	
	
<!-- 订单明细信息 -->
  <div class="modal fade" id="orderDetailModal" tabindex="-1" role="dialog" aria-labelledby="systemModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="width: 800px;height:900px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">订单货物明细</h5>
                <button class="close" type="button"  data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
            <div id="custom_data">

				<form id="frm_orderDetailModal" class="form-horizontal">
					<input type="hidden" id=ordrId name="ordrId">
							<div class="col-md-6" style="display:none">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">序号<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="ids" id="ids" class="form-control" placeholder="序号" value="" />
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">品名<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="pdNm" id="pdNm" class="form-control" onchange="setPdInf()">
											<option value="">请选择</option>
											<option th:each="model: ${pmModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">规格<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="spec" id="spec" class="form-control" placeholder="规格" disabled="disabled"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">型号</label>
									<div class="col-sm-8">
										<input name="modl" id="modl" class="form-control" placeholder="型号" disabled="disabled"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">质量标准<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="qlyStd" id="qlyStd" class="form-control" placeholder="质量标准" disabled="disabled"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">品牌</label>
									<div class="col-sm-8">
										<input name="brnd" id="brnd" class="form-control" placeholder="品牌" disabled="disabled" />
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">生产厂家</label>
									<div class="col-sm-8">
										<input name="pdFctr" id="pdFctr" class="form-control" placeholder="生产厂家" disabled="disabled" />
									</div>
								</div>
							</div>
							<div class="col-md-6" id="num_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">数量<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
											<input name="num" id="num" class="form-control" placeholder="数量"
												value="4" />
									</div>
								</div>
							</div>
							
							<div class="col-md-6" id="msunit_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">计量单位<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="msunit" id="msunit" class="form-control" placeholder="数量" disabled="disabled"/>
<!-- 											<select name="msunit" id="msunit2" class="form-control" style="width:150px;padding-left: 0px;">
												<option value="">-计量单位-</option>
												<option value="01" selected="selected">吨</option>
												<option value="02">件</option>
												<option value="03">公斤</option>
												<option value="04">方</option>
												<option value="05">个</option>
											</select> -->
									</div>
								</div>
							</div>
							
							<div class="col-md-6" id="pchUnitprc_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">采购单价<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<div class="col-xs-9" style="padding-left: 0px;">
											<input name="pchUnitprc" id="pchUnitprc" class="form-control"
												placeholder="采购单价" value="223" />
										</div>
										<div class="col-xs-3">
											<label for="" class="control-label">元</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="txnPrcdif_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">交易差价<span
										style="color: red">*</span></label>
									<div class="col-sm-8">

										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="txnPrcdif" id="txnPrcdif" class="form-control"
												placeholder="交易差价" value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">元</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="saleTntvPrc_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">销售暂定价<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<div class="col-xs-10" style="padding-left: 0px;">
											<input name="saleTntvPrc" id="saleTntvPrc" class="form-control"
												placeholder="销售(暂定)价" value="2" />
										</div>
										<div class="col-xs-1">
											<label for="" class="control-label">元</label>
										</div>
									</div>
								</div>
							</div>
				</form>
	
            </div>
            </div>
            <div class="modal-footer" style="text-align:center;">
                <a class="btn btn-primary-red"  type="button"  id="btn_add_order_detail" onclick=addOrderDetail()><i class="glyphicon glyphicon-plus"></i>&nbsp添 加</a>
                <a class="btn btn-primary-red"  type="button"  id="btn_modify_order_detail" onclick=addOrderDetail()><i class="glyphicon glyphicon-edit"></i>&nbsp更新</a>	
                <button type="button" class="btn btn-primary-gray"
						data-dismiss="modal">
						<i class="glyphicon glyphicon-remove-sign"></i>取消
					</button>												
            </div>
        </div>
    </div>
   </div>
   
   <!-- 质押申请 -->
   
   	<!-- 质押申请 - start-->	
	<section id="main_order_edit_detail2" class="content"
		style="display: none;">
		<div class="box box-info">
			<div class="box-header with-border">
				<h4 id="main_order_edit_detail_title" class="text-info">出质信息</h4>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse">
						<i class="fa fa-minus"></i>
					</button>
				</div>
			</div>
			<div class="box-body">
				<form id="frm_detail_order2" class="form-horizontal">
					<fieldset id='fld_detail'>
						<div class="w-z-info">
							 <input
								type="hidden" id="fileToDeleteId4" name="filesToDelete4">
							 <input id="secSrvCd2"
								name="secSrvCd" type="hidden" value="" /> <input id="arSt"
								name=arSt type="hidden" value="" />
							<div class="col-md-6" id="长约编号_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">长约编号<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="arId" class="form-control" placeholder="长约编号"
											disabled="disabled" />
									</div>
								</div>
							</div>
							<div class="col-md-6" id="银行_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">银行：</label>
									<div class="col-sm-8">
										<select name="bnk" class="form-control" disabled="disabled">
											<option value="">请选择</option>
											<option th:each="model: ${bnkModels}" th:value="${model.id}"
												th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="融资企业_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">融资企业<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="fncEntp" class="form-control"
											disabled="disabled">
											<option value="">请选择</option>
											<option th:each="model: ${fncEntpModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="供应商_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">供应商<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="ustrmSplr" class="form-control"
											disabled="disabled">
											<option value="">请选择</option>
											<option th:each="model: ${ustrmSplrModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="仓储公司_div">
							<div class="form-group">
									<label for="" class="col-sm-4 control-label">仓储公司<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<select name="stgco" class="form-control" >
											<option value="">请选择</option>
											<option th:each="model: ${stgcoModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
														
							<input type="hidden" id="fileId4" name="fileUrl4">
							
							<div class="row" id="upload_order_div2" >
								<div class="col-md-12" style="padding-right: 15px;">
									<div class="form-group" style="padding-left: 15px;">
										<label for="" class="col-sm-2 control-label" style="padding-left: 15px;">出质附件<span
											style="color: red">*</span></label>
										<div class="col-sm-10" style="padding-left: 10px;">
											<form id="frm_transfer" class="form-horizontal"
												enctype="multipart/form-data" method="post">
												<div id="fujianId4"></div>
											</form>
											<div class="modal-footer">
												<button id="btn_save2" type="button"
													class="btn btn-primary-red"
													onclick="javascript:addInputItem(4);">
													<i class="glyphicon glyphicon-plus"></i>新增附件
												</button>
												<button id="btn_save1" type="button"
													class="btn btn-primary-red"
													onclick="javascript:submitTransferFile(4);">
													<i class="glyphicon glyphicon-upload"></i>上传
												</button>
											</div>
										</div>
									</div>
								</div>
							</div>
							
							<div class="col-md-12" style="padding-right: 15px;">
							<!-- 订单明细部分 -->
							<button type="button" class="btn btn-primary-gray btn-lg pull-right" data-toggle="modal"   onclick="showOrderDetailModal2()" style="margin-right:15px;"><i class="glyphicon glyphicon-th"></i>货物明细</button>
							</div>
							
							<div class="col-md-12" style="padding-right: 15px; padding-top: 10px; display:none;" id="boot_table_div2">
								<table id="boot-table2"  align="center" data-toggle="table" class="table table-hover" name="area" style="table-layout:fixed">
									<thead>
									<tr bgcolor="#337AB7">
										<th style="border-bottom: none;" data-field="ids">序号</th>										
										<th style="border-bottom: none;" data-field="pdNm">品名</th>
										<th style="border-bottom: none;" data-field="spec">规格</th>
										<th style="border-bottom: none;" data-field="modl">型号</th>
										<th style="border-bottom: none;" data-field="qlyStd">质量标准</th>
										<th style="border-bottom: none;" data-field="brnd">品牌</th>
										<th style="border-bottom: none;" data-field="pdFctr">生产厂家</th>
										<th style="border-bottom: none;" data-field="num">数量</th>
										<th style="border-bottom: none;" data-field="msunit">计量单位</th>
										<th style="border-bottom: none;" data-field="pdId">品名id</th>
			<!-- 							<th style="border-bottom: none;" data-field="pchUnitprc">采购单价</th>
										<th style="border-bottom: none;" data-field="txnPrcdif">交易差价</th>
										<th style="border-bottom: none;" data-field="saleTntvPrc">销售暂定价</th> -->
										<th style="border-bottom: none;" data-field="operation" formatter="operateFormatter">操作</th>
					<!-- 					<th style="border-bottom: none;" data-field="operation" formatter="operateFormatter">删除</th> -->
									</tr>
									</thead>
										<!-- <tbody class="list">
									</tbody> -->
								</table>
							</div>
							
						</div>
			</fieldset>
			</form>
		</div>
		<div class="box-footer">
			<button id="btn_close" type="button"
				class="btn btn-primary-gray pull-right "
				onclick='javascript:showOrHideDetail(true, 1);'
				style="margin-right: 15px;">
				<i class="glyphicon glyphicon-remove-sign"></i>取消
			</button>
<!-- 			<button id="btn_save" type="button"
				class="btn btn-primary-red pull-right"
				onclick='javascript:validate_order_edit_detail2(2);'
				style="margin-right: 5px;">
				<i class="glyphicon glyphicon-floppy-disk"></i>保存
			</button> -->
			<button id="btn_save_submmit" type="button"
				class="btn btn-primary-red pull-right"
				onclick='javascript:validate_order_edit_detail2(1);'
				style="margin-right: 5px;">
				<i class="glyphicon glyphicon-ok-sign"></i>提交
			</button>
		</div>
		</div>
	</section>
	<!-- 详细信息 end-->
	
	<!-- 订单明细信息 -->
  <div class="modal fade" id="orderDetailModal2" tabindex="-1" role="dialog" aria-labelledby="systemModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="width: 800px;height:900px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">订单货物明细</h5>
                <button class="close" type="button"  data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
            <div id="custom_data">

				<form id="frm_orderDetailModal2" class="form-horizontal">
					<input type="hidden" id=ordrId name="ordrId">
							<div class="col-md-6" style="display:none">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">序号<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="ids" id="ids2" class="form-control" placeholder="序号" value="" />
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">品名<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
									<!-- 	<input name="pdNm" id="pdNm2" class="form-control" placeholder="品名" value="223" /> -->
										<select name="pdNm" id="pdNm2" class="form-control" onchange="setPdInf2()">
											<option value="">请选择</option>
											<option th:each="model: ${pmModels}"
												th:value="${model.id}" th:text="${model.name}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">规格<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="spec" id="spec2" class="form-control" placeholder="规格" disabled="disabled" />
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">型号</label>
									<div class="col-sm-8">
										<input name="modl" id="modl2" class="form-control" placeholder="型号" disabled="disabled" />
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">质量标准<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="qlyStd" id="qlyStd2" class="form-control" placeholder="质量标准" disabled="disabled"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">品牌</label>
									<div class="col-sm-8">
										<input name="brnd" id="brnd2" class="form-control" placeholder="品牌" disabled="disabled" />
									</div>
								</div>
							</div>
							<div class="col-md-6" >
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">生产厂家</label>
									<div class="col-sm-8">
										<input name="pdFctr" id="pdFctr2" class="form-control" placeholder="生产厂家" disabled="disabled"/>
									</div>
								</div>
							</div>
							<div class="col-md-6" id="num_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">数量<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
											<input name="num" id="num2" class="form-control" placeholder="数量"
												value="4" />
									</div>
								</div>
							</div>
							
							<div class="col-md-6" id="msunit_div">
								<div class="form-group">
									<label for="" class="col-sm-4 control-label">计量单位<span
										style="color: red">*</span></label>
									<div class="col-sm-8">
										<input name="msunit" id="msunit2" class="form-control" placeholder="数量" disabled="disabled"/>
<!-- 											<select name="msunit" id="msunit2" class="form-control" style="width:150px;padding-left: 0px;">
												<option value="">-计量单位-</option>
												<option value="01" selected="selected">吨</option>
												<option value="02">件</option>
												<option value="03">公斤</option>
												<option value="04">方</option>
												<option value="05">个</option>
											</select> -->
									</div>
								</div>
							</div>	
				</form>
	
            </div>
            </div>
            <div class="modal-footer" style="text-align:center;">
                <a class="btn btn-primary-red"  type="button"  id="btn_add_order_detail" onclick=addOrderDetail2()><i class="glyphicon glyphicon-plus"></i>&nbsp添 加</a>
                <a class="btn btn-primary-red"  type="button"  id="btn_modify_order_detail" onclick=addOrderDetail2()><i class="glyphicon glyphicon-edit"></i>&nbsp更新</a>	
                <button type="button" class="btn btn-primary-gray"
						data-dismiss="modal">
						<i class="glyphicon glyphicon-remove-sign"></i>取消
					</button>												
            </div>
        </div>
    </div>
   </div>
   
   	<!-- 发起质押确认提示框 start-->
	<div class="modal fade" id="saveOrderSubmitModal2" tabindex="-1"
		role="dialog" aria-labelledby="submitModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header" align="center">
					<h4 class="modal-title">友情提示</h4>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" align="center">提交后货物将入库并向银行发起质押申请，确定提交吗?</div>
				<div class="modal-footer" align="center">
					<button type="button" onclick="javascript:saveOrder2(2)" class="btn"
						data-dismiss="modal">确定</button>
					<button type="button" class="btn" data-dismiss="modal">取消</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- 发起质押确认提示框 end -->

	<!-- /.content -->
	<script th:src="@{/resources/plugins/jQuery/jquery-2.2.3.min.js}"></script>
	<script th:src="@{/resources/plugins/bootbox/bootbox.min.js?v=1}"></script>
	<script th:src="@{/resources/bootstrap/js/bootstrap.min.js}"></script>
	<script
		th:src="@{/resources/plugins/bootstrapValidator/bootstrapValidator.min.js}"></script>
	<script th:src="@{/resources/dist/js/app.min.js}"></script>
	<script th:src="@{/resources/e7/e7util-0.2.js}"></script>
	<script th:src="@{/resources/e7/e7table/e7table-0.2.js}"></script>
	<script th:src="@{/resources/e7/e7crud-0.2.js}"></script>
<!-- 	<script th:src="@{/resources/adminlte/plugins/ckeditor/ckeditor.js}"></script> -->
	<script
		th:src="@{/resources/plugins/datetimepicker/js/bootstrap-datetimepicker.min.js}"></script>
	<script
		th:src="@{/resources/plugins/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js}"></script>
	<script th:src="@{/resources/js_zcb/tools.js}"></script>
	
	<!-- <script th:src="@{/resources/bootstrap-table/bootstrap-table.js}"></script> -->
	<script th:src="@{/resources/bootstrap/js/bootstrap-table.min.js}"></script>
	
	<script th:src="@{/resources/bootstrap/js/bootstrap-select.min.js}"></script>
	<script th:src="@{/resources/js_zcb/layer/layer.js}"></script>
	<!-- 	<script th:src="@{/resources/js_zcb/ar.js}"></script> -->
		<!-- 时间轴流程图 -->
	<script th:src="@{/resources/js_zcb/step/js/step.js}"></script>
	<script type="text/javascript">
		var pageSetting = {
			modelName : '长约信息管理',
			resetPath : '[[@{/arManagement}]]'
		};
		
		var pdObj;
		$(function() {
			// 品名信息
			var test ='[[${pmModels}]]';
			test1=test.replace(/&quot;/g,"\"");
			pdObj =  JSON.parse(test1);	
			//e7table表格控件初始化
			e7tableInit();
			//表单校验控件初始化
			validator_1_Init();
			validator_2_Init();
			validator_3_Init();
			validator_4_Init();
			buttonInit();
			// 是否投保默认不选中，用户自己选择
			//			$("input:radio[name="isNeedIns"]").attr("checked",false);
		//	CKEDITOR.replace("editor1")

		});

		// 订单明细中品名信息各项获取
 		function setPdInf(){
 			var pdId = $('#pdNm').val();
			for(var i=0;i<pdObj.length;i++){
				if(pdObj[i].id == pdId){

					// 计量单位
					$('#msunit').val(pdObj[i].msunit);
					// 质量标准
					$('#qlyStd').val(pdObj[i].qlyStd);
					// 规格
					$('#spec').val(pdObj[i].spec);
					// 品牌
					$('#brnd').val(pdObj[i].brnd);
					// 生产厂家
					$('#pdFctr').val(pdObj[i].pdFctr);
					// 型号
					$('#modl').val(pdObj[i].modl);
				}
			}			
 		}
		
		// 质押明细中品名信息各项获取
 		function setPdInf2(){
 			var pdId = $('#pdNm2').val();
			for(var i=0;i<pdObj.length;i++){
				if(pdObj[i].id == pdId){
					// 计量单位
					$('#msunit2').val(pdObj[i].msunit);
					// 质量标准
					$('#qlyStd2').val(pdObj[i].qlyStd);
					// 规格
					$('#spec2').val(pdObj[i].spec);
					// 品牌
					$('#brnd2').val(pdObj[i].brnd);
					// 生产厂家
					$('#pdFctr2').val(pdObj[i].pdFctr);
					// 型号
					$('#modl2').val(pdObj[i].modl);
				}
			}			
 		}
		
		/***
		 * e7table表格控件初始化
		 */
		function e7tableInit() {

			$('#tbl_query')
					.e7table(
							{
								url : '[[@{/arManagement/queryPage_ing}]]',
								pageSize : 10,
								autoLoading : true, //控件初始化后，自动远程请求数据
								selectType : 'single',
								sortName : 'crtTm', //排序列名,创建时间
								striped : true, //奇偶行不同背景
								pagination : true,
								rownumbers : false, //如果为true，则显示一个行号列
								sortOrder : 'desc', //排序方向
								columns : [
										{
											title : '长约编号',
											field : 'arId',
											sortable : true,
											formatter : function(value, row,
													index) {
													 var s = '<a onclick=getOrderListByArId("'+ value +'") ><code class="text-success bg-success">'+ value+'</code></a>&nbsp;'; 
													return s;
											}
										},
										{
											title : '供应链',
											field : 'splchainCoName',
											sortable : true
										},
										{
											title : '融资企业',
											field : 'fncEntpName',
											sortable : true
										},
										{
											title : '供应商',
											field : 'ustrmSplrName',
											sortable : true
										},
										{
											title : '发起时间',
											field : 'crtTm',
											sortable : true,
											formatter : function(value, row,
													index) {
												return transDateTime(value);
											}
										},
										{
											title : '环节',
											field : 'aplyPcstpCd',
											sortable : true,
											formatter : function(value, row,
													index) {
												return transAplyPcstpCd(value);
											}
										},
										 {
											title : '操作',
											field : 'aplyPcstpCd',
											formatter : function(value, row,
													index) {
												if('[[${userType}]]' == "pltfrm"){													
													if (value == '01') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>发起</button>&nbsp;';
														return s;
													} else if (value == '02') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>确认</button>&nbsp;';
														return s;
													} else if (value == '02') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>确认</button>&nbsp;';
														return s;
													} else if (value == '03') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>确认</button>&nbsp;';
														return s;
													} else if (value == '04') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>承保</button>&nbsp;';
														return s;
													} else if (value == '05') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>一审</button>&nbsp;';
														return s;
													} else if (value == '06') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>二审</button>&nbsp;';
														return s;
													} else if (value == '07') {
														var s = '<button class="btn-success btn_small" onclick=showViewSubmitAr('
																+ row.id
																+ ',"'
																+ value
																+ '")>终止</button>&nbsp;';
														return s;
													}
												} else {
													var s = '<button class="btn-success btn_small" onclick=showAddOrderDialog_gyl('
													+ row.id
													+ ')>发起订单</button>&nbsp;';
													return s;
												}
											}
										}  ],
								onDblclick : function(index, row) {
									showArDetailDialog();
								}
							});
		}

		function buttonInit() {
			/* if ('[[${userType}]]' == 'Group') */
			if(1==1){
				/* 	$("#div_buttons")
				.append(
					 '<button type="button" class="btn btn-primary-red btn-sm" onclick="javascript:showAddDialog();" style="margin-right:5px;"><i class="glyphicon glyphicon-plus"></i>发起</button>'		
				);				 
				$("#div_buttons")
				.append(
					'<button type="button" class="btn btn-primary-red btn-sm" onclick="javascript:showEditDialog();" style="margin-right:5px;"><i class="glyphicon glyphicon-edit"></i>修改</button>');
				$("#div_buttons")
				.append(
					'<button id="btn_search" class="btn btn-primary-gray btn-sm" type="button" class="btn btn-primary pull-right" onclick="javascript:showArDetailDialog();" style="margin-right:5px;"><i class="glyphicon glyphicon-search"></i>查看</button>');
				$("#div_buttons")
				.append(
					 '<button type="button" class="btn btn-primary-red btn-sm" id="btn-del" onclick="javascript:del();"><i class="glyphicon glyphicon-trash"></i>删除</button>');
				 */
				/* 				$("#div_buttons")
				 .append(
				 '<button type="button" class="btn btn-primary-red btn-sm" onclick="javascript:showAddDialog();" style="margin-right:5px;"><i class="glyphicon glyphicon-plus"></i>发起</button>'		
				 );  */
				 /* 平台方发起订单按钮 */
				 
				 if(('[[${userType}]]' == "pltfrm") && ('[[${menuType}]]' == "01")){
					$("#div_buttons")
							.append(
								'<button type="button" class="btn btn-primary-red btn-sm" id="btn-del" onclick="javascript:showAddOrderDialog();" style="margin-right:5px;"><i class="glyphicon glyphicon-list"></i>发起订单</button>');
				 }
				 
				 /* 平台方、仓储方 发起质押申请按钮 */
				 if((('[[${userType}]]' == "pltfrm") || ('[[${userType}]]' == "stgco")) && ('[[${menuType}]]' == "02")){
					$("#div_buttons")
							.append(
								'<button type="button" class="btn btn-primary-red btn-sm" id="btn-del" onclick="javascript:showAddOrderDialog2();" style="margin-right:5px;"><i class="glyphicon glyphicon-list"></i>质押申请</button>');
				 }
				 
				/* $("#div_buttons")
						.append(
								'<button type="button" class="btn btn-primary-red btn-sm" id="btn-del" onclick="javascript:notFinishTips();" style="margin-right:5px;"><i class="glyphicon glyphicon-exclamation-sign"></i>申请质押</button>');
				$("#div_buttons")
						.append(
								'<button type="button" class="btn btn-primary-red btn-sm" id="btn-del" onclick="javascript:notFinishTips();" style="margin-right:5px;"><i class="glyphicon glyphicon-usd"></i>发起收款单</button>');
				$("#div_buttons")
						.append(
								'<button type="button" class="btn btn-primary-red btn-sm" id="btn-del" onclick="javascript:notFinishTips();" style="margin-right:5px;"><i class="glyphicon glyphicon-usd"></i>生成支付单</button>'); */

				$("#div_buttons")
						.append(
								/* '<button class="btn btn-default pull-right" onclick="javascript:reset()">重置</button>'); */
								'<button type="button" class="btn btn-sm btn-primary-gray pull-right" onclick="javascript:reset()"><i class="glyphicon glyphicon-refresh"></i>重置</button>');
				$("#div_buttons")
						.append(
								/* '<button class="btn btn-primary pull-right" onclick="javascript:query_ar_list()" style="margin-right:15px;">查询</button>'); */
								'<button id="btn_search"  type="button" class="btn btn-primary-red btn-sm pull-right" onclick="javascript:query_ar_list()" style="margin-right:15px;"><i class="glyphicon glyphicon-search"></i>查询</button>');
			} else {
				/* $("#div_buttons")
						.append(
								'<button class="btn btn-default" onclick="javascript:showViewDialog1();">查看33</button>'); */
				$("#div_buttons")
						.append(
								/* '<button class="btn btn-default pull-right" onclick="javascript:reset()">重置</button>'); */
								'<button type="button" class="btn btn-sm btn-primary-gray pull-right" onclick="javascript:reset()"><i class="glyphicon glyphicon-refresh"></i>重置</button>');
				$("#div_buttons")
						.append(
								/* '<button class="btn btn-primary pull-right" onclick="javascript:query_ar_list()" style="margin-right:15px;">查询</button>'); */
								'<button id="btn_search"  type="button" class="btn btn-primary-gray btn-sm pull-right" onclick="javascript:query_ar_list()" style="margin-right:15px;"><i class="glyphicon glyphicon-search"></i>查询</button>');
			}
		}

		// 长约相关js
		function queryArDetails(id, aplyPcstpCd, type) {// type 1:长约提交  0：长约详情查询

			// 带过来的环节编号
			$('#frm_submit_ar [name="aplyPcstpCd"]').val(aplyPcstpCd);

			if ($('#frm_detail').data('bootstrapValidator')) {
				$('#frm_detail').data('bootstrapValidator').resetForm(true);
			}
			E7
					.post(
							pageSetting.resetPath + '/getDetail',
							{
								'id' : id
							},
							function(result) {
								fillForm('#frm_detail', result.data);
								var detail = result.data;
								for (key in detail) {
									$('#frm_detail [name="' + key + '"]').val(
											detail[key]);
								}
								// 展示时间轴进度图				
								drawProcessDiagraph(detail["arSt"], "01", "", "");
								///
								$('#frm_submit_ar [name="arId"]').val(
										detail["arId"]);
								$('#frm_submit_ar [name="aplyPcstpCd"]').val(
										detail["aplyPcstpCd"]);								

								// 长约详情div标题
								$('#main_edit_detail_title').text(
										"长约信息 [ " + detail["arId"] + " ]");
								// 投保信息是否显示
								/* 					var isNeedIns = detail["isNeedIns"];
								 if(isNeedIns == 1){
								 show_or_hide_ins_div(true);
								 } else {
								 show_or_hide_ins_div(false);
								 } */
								 
									// 根据角色不同控制数据展示
									var datas = detail["roleParmsList"];
									if (null != datas) {
										for (var i = 0; i < datas.length; i++) {
											// 控制界面控件是否显示
											$('#' + datas[i] + '_div').hide();
										}
									}
									
								///附件列表
								var td = detail["t2UploadAtch01List"];
								var insertHtml = "";
								for (var kk = 0; kk < td.length; kk++) {
									insertHtml = insertHtml
											+ '<div class="col-sm-2"><i class="iconfont icon-kl-fujian"></i><a href="'+ td[kk].srFileRte +'" target="_blank"><div>'
											+ td[kk].oriFileNm + '<p>'
											+ getFileType(td[kk].oriFileNm)
											+ '</div></a></div>';
								}
								if (td.length > 0) {
									var testdiv = document
											.getElementById("upload_atch_div");
									testdiv.innerHTML = insertHtml;
									$('#query_ar_atch_div').fadeIn(300);
								} else {
									$('#query_ar_atch_div').hide();
								}
								//					bespeakStatus = detail['bespeakStatus'];				
								///环节流转列表table生成
								var lnk_jrnl_inf = detail["list"];
								insertHtml = "";
								insertHtml = '<table id="tbl_Lnk_Jrnl_Inf2" align="center"class="table table-hover"> <thead> <tr> <th style="border-bottom: none;">环节</th><th style="border-bottom: none;">结果</th><th style="border-bottom: none;">提交人</th><th style="border-bottom: none;">公司</th><th style="border-bottom: none;">备注</th><th style="border-bottom: none;">处理时间</th><th style="border-bottom: none;">详情</th></tr> </thead><tbody>';
								for (var jj = 0; jj < lnk_jrnl_inf.length; jj++) {
									var rmrkDesc = lnk_jrnl_inf[jj].rmrk;
									if ((null != rmrkDesc)
											&& (rmrkDesc.length > 5)) {
										rmrkDesc = '<a onclick=getArSubmmitDetail("'
												+ lnk_jrnl_inf[jj].id
												+ '","'
												+ lnk_jrnl_inf[jj].rltvId
												+ '","'
												+ lnk_jrnl_inf[jj].aplyPcstpCd
												+ '")>'
												+ rmrkDesc.substring(0, 5)
												+ "..." + '</a>';
									}
									if ((null == rmrkDesc) || ("" == rmrkDesc)) {
										rmrkDesc = "无";
									}
									insertHtml = insertHtml
											+ '<tr><td>'
											+ transAplyPcstpCd(lnk_jrnl_inf[jj].aplyPcstpCd)
											+ '</td><td>'
											+ transAplyPsrltCd(lnk_jrnl_inf[jj].aplyPsrltCd)
											+ '</td><td>'
											+ lnk_jrnl_inf[jj].username
											+ '</td><td>'
											+ lnk_jrnl_inf[jj].companyName
											+ '</td><td>'
											+ rmrkDesc
											+ '</td><td>'
											+ transDateTime(lnk_jrnl_inf[jj].lnkEdtm)
											+ '</td><td><input type="button" class="btn-success btn_small" onclick=getArSubmmitDetail("'
											+ lnk_jrnl_inf[jj].id + '","'
											+ lnk_jrnl_inf[jj].rltvId + '","'
											+ lnk_jrnl_inf[jj].aplyPcstpCd
											+ '") value="查看"> </td></tr>';
								}
								insertHtml = insertHtml + "</tbody></table>";
								testdiv = document
										.getElementById("lnk_jrnl_inf_tbl_div");
								// 长约流转div标题
								$('#ar_lnk_jrnl_inf_detail_title').text(
										"流转信息 [ " + detail["arId"] + " ]");
								// 长约提交div标题				
								var titleDesc = "长约"
										+ transAplyPcstpCd(aplyPcstpCd);
								$('#submit_ar_detail_title')
										.text(
												"您所在位置 : 长约管理 > 执行中长约 > "
														+ titleDesc + " [ "
														+ detail["arId"] + " ]");
								// 长约提交详情查询div标题
								$('#query_ar_submmit_title').text(
										"长约提交详情 [ " + detail["arId"] + " ]");

								testdiv.innerHTML = insertHtml;

								// 决定显示哪一个返回按钮
								if (type == 1) {
									// 返回到长约详情查询
									$('#btn_close_return4').fadeIn(300);
									$('#btn_close_return3').hide();
								} else {

									// 返回到长约提交
									$('#btn_close_return3').fadeIn(300);
									$('#btn_close_return4').hide();
								}
							});
		}

		function getArSubmmitDetail(id, arId, aplyPcstpCd) {
			// 带过来的环节编号
			E7
					.post(
							pageSetting.resetPath + '/getArSubmmitDetail',
							{
								'id' : id,
								'arId' : arId,
								'aplyPcstpCd' : aplyPcstpCd
							},
							function(result) {
								//				fillForm('#frm_detail2', result.data);
								var detail = result.data;
								/* 				$('#frm_detail2 [name="submmitUsername"]').val(detail["username"]);
											$('#frm_detail2 [name="companyName"]').val(detail["name"]);
											$('#frm_detail2 [name="aplyPcstpCdDesc"]').val(transAplyPcstpCd(detail["aplyPcstpCd"]));
											$('#frm_detail2 [name="lnkEdtm"]').val(transDateTime(detail["lnkEdtm"]));
											$('#frm_detail2 [name="aplyPsrltCdDesc"]').val(transAplyPsrltCd(detail["aplyPsrltCd"]));
											$('#frm_detail2 [name="rmrkDesc"]').val(detail["rmrk"]); */
								document.getElementById('companyName').innerText = "公    司    :    "
										+ detail["name"];
								document.getElementById('submmitUsername').innerText = "提交人    :    "
										+ detail["username"];
								document.getElementById('aplyPcstpCdDesc').innerText = "环    节    :    "
										+ transAplyPcstpCd(detail["aplyPcstpCd"]);
								document.getElementById('lnkEdtm').innerText = "时    间    :    "
										+ transDateTime(detail["lnkEdtm"]);
								document.getElementById('aplyPsrltCdDesc').innerText = "结    果    :    "
										+ transAplyPsrltCd(detail["aplyPsrltCd"]);
								document.getElementById('rmrkDesc').innerText = "备    注    :    "
										+ detail["rmrk"];
								///附件列表
								var td = detail["t2UploadAtch01List"];
								var insertHtml = "";
/* 								for (var kk = 0; kk < td.length; kk++) {
									var oriFileNm = td[kk].oriFileNm;
									var index1 = oriFileNm.lastIndexOf(".");
									var index2 = oriFileNm.length;
									var suffix = oriFileNm.substring(
											index1 + 1, index2);//后缀名

									insertHtml = insertHtml
											+ '<div class="col-sm-2"><i class="iconfont icon-kl-fujian"></i><a href="'+ td[kk].srFileRte +'" target="_blank"><div>'
											+ td[kk].oriFileNm + '<p>'
											+ getFileType(td[kk].oriFileNm)
											+ transDateTime(suffix)
											+ '</div></a></div>';
								}
								if (td.length > 0) {
									var testdiv = document
											.getElementById("upload_atch_div2");
									testdiv.innerHTML = insertHtml;
									$('#query_ar_atch_div2').fadeIn(300);
								} else {
									$('#query_ar_atch_div2').hide();
								} */
								
								
							 	$('#query_ar_atch_div2').hide();	
								if(null != td && undefined != td && ""!=td){
									for ( var kk = 0; kk < td.length; kk++) {
										var oriFileNm = td[kk].oriFileNm;
										var index1=oriFileNm.lastIndexOf(".");
										var index2=oriFileNm.length;
										var suffix=oriFileNm.substring(index1+1,index2);//后缀名
										//insertHtml = insertHtml + '<div class="col-sm-2"><i class="iconfont icon-kl-fujian"></i><a href="'+ td[kk].srFileRte +'" target="_blank"><div>'+td[kk].oriFileNm+'<p>'+getFileType(td[kk].oriFileNm) + transDateTime(td[kk].tms) +'</div></a></div>';
										insertHtml = insertHtml + '<div class="col-sm-2"><i class="iconfont icon-kl-fujian"></i><a href="'+ td[kk].srFileRte +'" target="_blank"><div>'+td[kk].oriFileNm+'<p>'+getFileType(td[kk].oriFileNm)+'</div></a></div>';
									}								
									if(td.length > 0){
										var testdiv = document.getElementById("upload_atch_div2");
										testdiv.innerHTML=insertHtml;
										$('#query_ar_atch_div2').fadeIn(300);
									} else {
										$('#query_ar_atch_div2').hide();	
									} 
								}
								showOrHideDetail(false, 5);
							});
		}

		function transAplyPsrltCd(aplyPsrltCd) {
			if (aplyPsrltCd == '01') {
				return "通过";
			} else if (aplyPsrltCd == '02') {
				return "退回";
			} else if (aplyPsrltCd == '03') {
				return "拒绝";
			} else
				return aplyPsrltCd;
		}

		function transAplyPcstpCd(value) {
			if (value == '01') {
				return "发起";
			} else if (value == '02') {
				return "供应链确认";
			} else if (value == '03') {
				return "融资企业确认";
			} else if (value == '04') {
				return "承保";
			} else if (value == '05') {
				return "一审";
			} else if (value == '06') {
				return "二审";
				;
			} else if (value == '07') {
				return "审批通过";
			} else if (value == '') {
				return "完成";
			} else
				return value;
		}

		function showViewSubmitAr(id, aplyPcstpCd) {
			E7.resetForm('#frm_submit_ar');
			$('#frm_submit_ar').data('bootstrapValidator').updateStatus(
					'aplyPsrltCd', 'NOT_VALIDATED', null).validateField(
					'aplyPsrltCd');
			// 初始化上传附件控件
			initInputItem(2);
			queryArDetails(id, aplyPcstpCd, 1);// flag 1:长约提交  0：长约详情查询
			showOrHideDetail(false, 4);
		}
		function showArDetailDialog() {
			var rows = $('#tbl_query').e7table('getSelectedRows');
			if (rows.length == 0) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '请选择数据！'
				});
				return;
			} else if (rows.length > 1) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '一次只能修改一条数据！'
				});
				return;
			}
			if ($('#frm_detail').data('bootstrapValidator')) {
				$('#frm_detail').data('bootstrapValidator').resetForm(true);
			}
			queryArDetails(rows[0]['id'], "", 0);// flag 1:长约提交  0：长约详情查询
			showOrHideDetail(false, 3);
		}

		function del() {

			var rows = $('#tbl_query').e7table('getSelectedRows');
			if (rows.length == 0) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '请选择数据！'
				});
				return;
			} else if (rows.length > 1) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '一次只能修改一条数据！'
				});
				return;
			}
			if ($('#frm_detail').data('bootstrapValidator')) {
				$('#frm_detail').data('bootstrapValidator').resetForm(true);
			}
			E7.post(pageSetting.resetPath + '/deleteAr', {
				'id' : rows[0]['id']
			}, function(result) {
				query_ar_list();
				bootbox.alert({
					'title' : "消息",
					'message' : '删除成功！'
				});
			});
		}

		function validate_frm_detail() {
			$('#frm_detail').bootstrapValidator('validate');
			if (!$('#frm_detail').data('bootstrapValidator').isValid()) {
				return;
			} else {
				$('#saveSubmitModal').modal('show');
			}
		}

		function validate_order_edit_detail(flag) {
			$('#frm_detail_order').bootstrapValidator('validate');
			
			if (!$('#frm_detail_order').data('bootstrapValidator')
					.isValid()) {
				return;				
			} else {
				if (1 == flag) {			
					// 取订单明细表格的数据
					var all = $('#boot-table').bootstrapTable('getData');
					//发起的时候订单明细不能为空
						if(all == null || all == undefined || all == ""){
							bootbox.alert({
								'title' : "提示信息",
								'message' : '订单明细不能为空！'
							});
							return;
						}
										
					$('#secSrvCd').val("02");//提交
					$('#saveOrderSubmitModal').modal('show');
				} else if (2 == flag) {
					
					$("#secSrvCd").val("01");//保存
					saveOrder(1);
				}
			}
		}
		
		// 提交质押申请
			function validate_order_edit_detail2(flag) {
			$('#frm_detail_order').bootstrapValidator('validate');
			
			if (!$('#frm_detail_order').data('bootstrapValidator')
					.isValid()) {
				return;				
			} else {
				if (1 == flag) {			
					// 取订单明细表格的数据
					var all = $('#boot-table2').bootstrapTable('getData');
					//发起的时候订单明细不能为空
						if(all == null || all == undefined || all == ""){
							bootbox.alert({
								'title' : "提示信息",
								'message' : '订单明细不能为空！'
							});
							return;
						}
										
					$('#secSrvCd2').val("02");//提交
					$('#saveOrderSubmitModal2').modal('show');
				} 
				/*else if (2 == flag) {					
					$("#secSrvCd").val("01");//保存
					saveOrder(1);
				} */
			}
		}

		function save() {
/* 			for (instance in CKEDITOR.instances) {
				CKEDITOR.instances[instance].updateElement();
			} */

			var formParams = E7.serialForm('#frm_detail');
			E7.post(pageSetting.resetPath + '/save', formParams,
					function(data) {
						query_ar_list();
						//showOrHideDetail(true, 1);
						bootbox.alert({
							'title' : "消息",
							'message' : '长约发起成功！'
						});
						$('#tbl_query').e7table(
								'reload',
								function() {
									if (formParams['id'] != '') {
										$('#tbl_query').e7table('selectById',
												formParams['id']);
									}
								});
					});
		}

		function saveOrder(flag) {
/* 			for (instance in CKEDITOR.instances) {
				CKEDITOR.instances[instance].updateElement();
			} */
			// 取订单明细表格的数据
			var all = $('#boot-table').bootstrapTable('getData');
			var formParams = E7.serialForm('#frm_detail_order');
			var fileUrl3 = document.getElementById("fileId3").value;
			
			E7.post('/orderManagement/save', {inVo:JSON.stringify(formParams), detail:JSON.stringify(all), fileUrl:fileUrl3}, function(data) {
				query_ar_list();
				showOrHideDetail(true, 1);
				if(flag==1){
					bootbox.alert({
						'title' : "消息",
						'message' : '订单保存成功！'
					});
				} else if(flag==2){
					bootbox.alert({
						'title' : "消息",
						'message' : '订单发起成功！'
					});
				} else {
					bootbox.alert({
						'title' : "消息",
						'message' : '操作成功！'
					});
				}
				$('#tbl_query').e7table(
						'reload',
						function() {
							if (formParams['id'] != '') {
								$('#tbl_query').e7table('selectById',
										formParams['id']);
							}
						});
			});
		}
		// 提交质押申请
		function saveOrder2(flag) {
			/* 			for (instance in CKEDITOR.instances) {
							CKEDITOR.instances[instance].updateElement();
						} */
						// 取订单明细表格的数据
						var all = $('#boot-table2').bootstrapTable('getData');
						var formParams = E7.serialForm('#frm_detail_order2');
						var fileUrl4 = document.getElementById("fileId4").value;
						E7.post('/plgAply/save', {inVo:JSON.stringify(formParams), detail:JSON.stringify(all), fileUrl:fileUrl4}, function(data) {
							query_ar_list();
							showOrHideDetail(true, 1);
							if(flag==1){
								bootbox.alert({
									'title' : "消息",
									'message' : '质押申请保存成功！'
								});
							} else if(flag==2){
								bootbox.alert({
									'title' : "消息",
									'message' : '质押申请提交成功！'
								});
							} else {
								bootbox.alert({
									'title' : "消息",
									'message' : '操作成功！'
								});
							}
							$('#tbl_query').e7table(
									'reload',
									function() {
										if (formParams['id'] != '') {
											$('#tbl_query').e7table('selectById',
													formParams['id']);
										}
									});
						});
					}

		function showEditDialog(disable) {
			var rows = $('#tbl_query').e7table('getSelectedRows');
			if (rows.length == 0) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '请选择数据！'
				});
				return;
			} else if (rows.length > 1) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '一次只能修改一条数据！'
				});
				return;
			}
			if ($('#frm_detail').data('bootstrapValidator')) {
				$('#frm_detail').data('bootstrapValidator').resetForm(true);
			}
			E7
					.post(
							pageSetting.resetPath + '/getDetail',
							{
								'id' : rows[0]['id']
							},
							function(result) {
								fillForm('#frm_detail', result.data);
								// 实时判断长约是否可以修改	
								if (result.data["aplyPcstpCd"] != "01") {
									bootbox
											.alert({
												'title' : '错误消息',
												'message' : '当前长约不在发起环节禁止修改！请退回到发起环节再修改。'
											});
									return;
								}
								// 多次修改，清空上次div追加的内容
								$("#fujianId").empty();
								if (result.data.t2UploadAtch01List != undefined) {
									for (i = 0; i < result.data.t2UploadAtch01List.length; i++) {
										var elem = result.data.t2UploadAtch01List[i];
										/* 										var item = '<div name="inputDiv">'
																					+ elem.oriFileNm
																					+ '<input name="fileName" type="file" src="'+elem.oriFileNm+'"  class="form-control" value="'+elem.oriFileNm+'"/><a onclick="deleteItem(this)">删除</a> <br/></div>'; */
										var atchId = elem.id;
										var item = '<div name="inputDiv"> <a href="' + elem.srFileRte +'" target="_blank">'
												+ elem.oriFileNm
												+ '&nbsp&nbsp</a>&nbsp&nbsp<a onclick="deleteItem2(this, '
												+ elem.id
												+ ')"> 删除</a> <br/></div>';

										$("#fujianId").append(item);
									}
								}
								showOrHideDetail(true, 6);
								// 展示保险div
								show_or_hide_ins_div(true);
							});
		}
		fillForm = function(frm, data, reset, parent) {
			if (E7.isEmpty(parent)
					&& (E7.getType(reset) == 'undefined' || reset))
				E7.resetForm(frm);
			for ( var key in data) {
				var elName = E7.isEmpty(parent) ? key : (parent + '.' + key);
				var elValue = data[key];

				if (elValue == null)
					continue;
				if (E7.getType(elValue) == 'object') {
					E7.fillForm(frm, elValue, false, elName);
					continue;
				}
				var els = $(frm + ' [name="' + elName + '"]');
				if (els.length == 0)
					continue;
				if (els[0].type == 'radio') {
					$(frm + ' [name="' + elName + '"][value="' + elValue + '"]')
							.prop("checked", true);
				} else if (els[0].type == 'select-multiple') {
					if (elValue instanceof Array) {
						els.val(elValue);
					} else if (typeof elValue == 'string') {
						els.val(elValue.split(','));
					} else if (typeof elValue == 'number') {
						els.val(elValue + '');
					} else {
						els.val(elValue);
					}
				} else if (els[0].type == 'checkbox') {
					if (els.length == 1) {
						if (els.val() == elValue) {
							els.prop('checked', true);
						}
					} else {
						if (elValue instanceof Array) {
							els.val(elValue);
						} else if (typeof elValue == 'string') {
							els.val(elValue.split(','));
						} else if (typeof elValue == 'number') {
							els.val(elValue + '');
						} else {
							els.val(elValue);
						}
					}
				} else if (els[0].id == 'editor1') {
				///	CKEDITOR.instances.editor1.setData(elValue);
				} else {
					els.val(elValue + '');
				}
			}
		}

		function submitTransferFile(flag) {
			if (flag == 1) {
				var file = document.getElementsByName("fileName")
				//var file = $('.select-file').files//document.getElementById("file_transfer").files;
				//TODO:valid
				var formData = new FormData();
				for (i = 0; i < file.length; i++) {
					formData.append('file', file[i].files[0]);
				}
				E7.postMultipart('[[@{/arManagement/ossUpload}]]', formData,
						function(result) {
							var fileUrl = result.data;
							$("#fileId").val(fileUrl);
							bootbox.alert({
								'title' : '消息',
								'message' : '上传成功, 文件：<code>' + result.data
										+ '</code>！'
							});
						});
			} else if (flag == 2) {
				var file = document.getElementsByName("fileName2")
				//var file = $('.select-file').files//document.getElementById("file_transfer").files;
				//TODO:valid
				var formData = new FormData();
				for (i = 0; i < file.length; i++) {
					formData.append('file', file[i].files[0]);
				}
				E7.postMultipart('[[@{/arManagement/ossUpload}]]', formData,
						function(result) {
							var fileUrl2 = result.data;
							$("#fileId2").val(fileUrl2);
							bootbox.alert({
								'title' : '消息',
								'message' : '上传成功, 文件：<code>' + result.data
										+ '</code>！'
							});
						});
			} else if (flag == 3) {
				var file = document.getElementsByName("fileName3")
				//var file = $('.select-file').files//document.getElementById("file_transfer").files;
				//TODO:valid
				var formData = new FormData();
				for (i = 0; i < file.length; i++) {
					formData.append('file', file[i].files[0]);
				}
				E7.postMultipart('[[@{/arManagement/ossUpload}]]', formData,
						function(result) {
							var fileUrl3 = result.data;
							$("#fileId3").val(fileUrl3);
							bootbox.alert({
								'title' : '消息',
								'message' : '上传成功, 文件：<code>' + result.data
										+ '</code>！'
							});
						});
			}else if (flag == 4) {
				var file = document.getElementsByName("fileName4")
				//var file = $('.select-file').files//document.getElementById("file_transfer").files;
				//TODO:valid
				var formData = new FormData();
				for (i = 0; i < file.length; i++) {
					formData.append('file', file[i].files[0]);
				}
				E7.postMultipart('[[@{/arManagement/ossUpload}]]', formData,
						function(result) {
							var fileUrl4 = result.data;
							$("#fileId4").val(fileUrl4);
							bootbox.alert({
								'title' : '消息',
								'message' : '上传成功, 文件：<code>' + result.data
										+ '</code>！'
							});
						});
			}
		}

		function addInputItem(flag) {
			if (flag == 1) {
				var item = '<div name="inputDiv"><input name="fileName" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				$("#fujianId").append(item);
			} else if (flag == 2) {
				var item = '<div name="inputDiv"><input name="fileName2" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				$("#fujianId2").append(item);
			} else if (flag == 3) {
				var item = '<div name="inputDiv"><input name="fileName3" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				$("#fujianId3").append(item);
			}else if (flag == 4) {
				var item = '<div name="inputDiv"><input name="fileName4" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				$("#fujianId4").append(item);
			}
		}
		function initInputItem(flag) {
			if (flag == 1) {
				var item = '<div name="inputDiv"><input name="fileName" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				var testdiv = document.getElementById("fujianId");
				testdiv.innerHTML = item;
			} else if (flag == 2) {
				var item = '<div name="inputDiv"><input name="fileName2" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				var testdiv = document.getElementById("fujianId2");
				testdiv.innerHTML = item;
			} else if (flag == 3) {
				var item = '<div name="inputDiv"><input name="fileName3" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
				var testdiv = document.getElementById("fujianId3");
				testdiv.innerHTML = item;
			} else if (flag == 4) {
					var item = '<div name="inputDiv"><input name="fileName4" type="file"  class="form-control"/><a onclick="deleteItem(this)">删除</a> <br/></div>';
					var testdiv = document.getElementById("fujianId4");
					testdiv.innerHTML = item;
				}
		}
		function deleteItem(input) {
			$(input).parent().remove();
		}
		function deleteItem2(input, id) {
			var preValue = $("#fileToDeleteId").val();
			if (preValue == null || preValue == "")
				$("#fileToDeleteId").val(id);
			else
				$("#fileToDeleteId").val(preValue + "||" + id);
			$(input).parent().remove();
		}

		/* 日期选择控件-长约开始日期 */
		$('#arStdtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		}).on(
				'changeDate',
				function(ev) {
					$('#arEddtDTPicker')
							.datetimepicker('setStartDate', ev.date);
					var oneYearAfter = ev.date;
					oneYearAfter.setFullYear(oneYearAfter.getFullYear() + 1);
					oneYearAfter.setDate(oneYearAfter.getDate() - 1);
					$('#arEddtDTPicker')
							.datetimepicker('setDate', oneYearAfter);

					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'arStdt', 'NOT_VALIDATED', null).validateField(
							'arStdt');
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'arEddt', 'NOT_VALIDATED', null).validateField(
							'arEddt');
					// 判断保险起止时间与长约起止时间，并提示，但是不禁止提交
					checkInsDtAndArDt();
				});
		/* 日期选择控件-长约结束日期 */
		$('#arEddtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		}).on(
				'changeDate',
				function(ev) {
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'arStdt', 'NOT_VALIDATED', null).validateField(
							'arStdt');
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'arEddt', 'NOT_VALIDATED', null).validateField(
							'arEddt');
					// 判断保险起止时间与长约起止时间，并提示，但是不禁止提交
					checkInsDtAndArDt();
				});
		/* 日期选择控件 - 保险开始日期*/
		$('#insStdtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		}).on(
				'changeDate',
				function(ev) {
					$('#insEddtDTPicker').datetimepicker('setStartDate',
							ev.date);
					var oneYearAfter = ev.date;
					oneYearAfter.setFullYear(oneYearAfter.getFullYear() + 1);
					oneYearAfter.setDate(oneYearAfter.getDate() - 1);

					$('#insEddtDTPicker').datetimepicker('setDate',
							oneYearAfter);
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'insStdt', 'NOT_VALIDATED', null).validateField(
							'insStdt');
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'insEddt', 'NOT_VALIDATED', null).validateField(
							'insEddt');
					// 判断保险起止时间与长约起止时间，并提示，但是不禁止提交
					checkInsDtAndArDt();
				});
		/* 日期选择控件 - 保险结束日期*/
		$('#insEddtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		}).on(
				'changeDate',
				function(ev) {
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'insStdt', 'NOT_VALIDATED', null).validateField(
							'insStdt');
					$('#frm_detail').data('bootstrapValidator').updateStatus(
							'insEddt', 'NOT_VALIDATED', null).validateField(
							'insEddt');
					// 判断保险起止时间与长约起止时间，并提示，但是不禁止提交
					checkInsDtAndArDt();
				});

		/* 日期选择控件-订单开始日期 */
		$('#ordrStdtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		});
		/* 日期选择控件-订单结束日期 */
		$('#ordrEddtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		});
		/* 日期选择控件-保险起运日期 */
		$('#tprtDtDTPicker').datetimepicker({
			language : 'zh-CN',
			minView : "month",//设置只显示到月份
			format : "yyyy-mm-dd",//日期格式
			autoclose : true,//选中关闭
			todayBtn : true
		//今日按钮
		});

		// 判断保险起止时间与长约起止时间，并提示，但是不禁止提交
		function checkInsDtAndArDt() {
			var msg = "";
			if (($('#insStdtDTPicker').val() != "")
					&& ($('#arStdtDTPicker').val() != "")
					&& ($('#insStdtDTPicker').val() > $('#arStdtDTPicker')
							.val())) {
				msg += "[保险开始日期] 晚于 [长约开始日期] !";
			}
			if (($('#insEddtDTPicker').val() != "")
					&& ($('#arEddtDTPicker').val() != "")
					&& ($('#insEddtDTPicker').val() < $('#arEddtDTPicker')
							.val())) {
				msg += "[保险结束日期] 早于 [长约结束日期] !";
			}
			if (msg != "") {
				bootbox.alert({
					'title' : '特别提醒',
					'message' : msg
				});
			}
		}

		/***
		 * 查询
		 */
		function query_ar_list() {
			showOrHideDetail(true, 1);
			$('#tbl_query').e7table('query', '#frm_query');

		}
		function showOrHideDetail(editable, flag) {
			if (editable) {
				$('#fld_detail').prop('disabled', false);
				$('#btn_save').show();
			} else {
				$('#fld_detail').prop('disabled', true);
				$('#btn_save').hide();
			}
			// 长约列表查询
			if (flag == 1) {
				$('#main_search_detail').fadeIn(300);
				$('#main_edit_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').hide();
				$('#submit_ar_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				//新发起订单
				$('#main_order_edit_detail').hide();
				// 返回按钮
				$('#btn_close_div').hide();
				$('#query_ar_submmit_detail').hide();
			} else if (flag == 2) {// 长约发起	
				// section
				$('#main_edit_detail_title').text("长约发起");
				$('#main_edit_detail').fadeIn(300);
				$('#main_search_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').hide();
				$('#submit_ar_detail').hide();
				$('#query_ar_submmit_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				//新发起订单
				$('#main_order_edit_detail').hide();
				// 返回按钮
				$('#btn_close_div').hide();
				// 附件
				$('#upload_ar_div').show();
				$('#query_ar_atch_div').hide();
				// 保险信息输入部门默认隐藏
				show_or_hide_ins_div(false);
				// 参数
				$('#arIdDiv').hide();
				// 按钮				
				$('#btn_close').show();
				$('#btn_save').show();
				//面板收缩控制
				var div = document.getElementById('main_edit_detail_clapse');
				div.setAttribute("class", "box box-info");
				//面板收缩+-号
				div = document.getElementById('main_edit_detail_li');
				div.setAttribute("class", "fa fa-minus");
			} else if (flag == 3) {// 长约详情查看
				//$('#main_edit_detail_title').text("长约信息");
				// section
				$('#main_edit_detail').fadeIn(300);
				$('#main_search_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').fadeIn(300);
				$('#submit_ar_detail').hide();
				$('#query_ar_submmit_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				//新发起订单
				$('#main_order_edit_detail').hide();
				// 附件
				$('#upload_ar_div').hide();
				//				$('#query_ar_atch_div').show();//改为在查询后控制显示，没有数据的不显示
				// 返回按钮
				$('#btn_close_div').show();
				// 参数
				$('#arIdDiv').show();
				// 按钮	
				$('#btn_close').hide();
				$('#btn_save').hide();
				//面板收缩控制
				var div = document
						.getElementById('ar_lnk_jrnl_inf_detail_clapse_box');
				div.setAttribute("class", "box box-info");
				div = document.getElementById('main_edit_detail_clapse');
				div.setAttribute("class", "box box-info");
				//面板收缩+-号
				div = document.getElementById('main_edit_detail_li');
				div.setAttribute("class", "fa fa-minus");
			} else if (flag == 6) {// 长约修改
				// section
				$('#main_edit_detail_title').text("长约修改");
				$('#main_edit_detail').fadeIn(300);
				$('#main_search_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').hide();
				$('#submit_ar_detail').hide();
				$('#query_ar_submmit_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				//新发起订单
				$('#main_order_edit_detail').hide();
				// 返回按钮
				$('#btn_close_div').hide();
				// 附件
				$('#upload_ar_div').show();
				$('#query_ar_atch_div').hide();
				// 保险信息输入部门默认隐藏
				show_or_hide_ins_div(false);
				// 参数
				$('#arIdDiv').hide();
				// 按钮				
				$('#btn_close').show();
				$('#btn_save').show();
				//面板收缩控制
				var div = document.getElementById('main_edit_detail_clapse');
				div.setAttribute("class", "box box-info");
				//面板收缩+-号
				div = document.getElementById('main_edit_detail_li');
				div.setAttribute("class", "fa fa-minus");
			} else if (flag == 4) {// 长约提交
				//$('#main_edit_detail_title').text("长约信息");
				// section
				$('#main_edit_detail').fadeIn(300);
				$('#main_search_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').fadeIn(300);
				$('#submit_ar_detail').fadeIn(300);
				$('#query_ar_submmit_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				//新发起订单
				$('#main_order_edit_detail').hide();
				// 附件
				$('#upload_ar_div').hide();
				$('#query_ar_atch_div').show();
				// 返回按钮
				$('#btn_close_div').hide();
				// 参数
				$('#arIdDiv').show();
				// 按钮
				$('#btn_close').hide();
				$('#btn_save').hide();
				//面板收缩控制
				var div = document
						.getElementById('ar_lnk_jrnl_inf_detail_clapse_box');
				div.setAttribute("class", "box box-info collapsed-box");
				div = document.getElementById('main_edit_detail_clapse');
				div.setAttribute("class", "box box-info collapsed-box");
				//面板收缩+-号
				div = document.getElementById('main_edit_detail_li');
				div.setAttribute("class", "fa fa-plus");
				div = document.getElementById('ar_lnk_jrnl_inf_detail_li');
				div.setAttribute("class", "fa fa-plus");
				
			} else if (flag == 5) {//长约提交详情查看
				$('#main_search_detail').hide();
				$('#main_edit_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').hide();
				$('#submit_ar_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				// 返回按钮
				$('#btn_close_div').hide();	
				$('#query_ar_submmit_detail').fadeIn(300);	
				// 提交详情页面的返回
				$('#submmit_btn_close_div').show();
			} else if (flag == 7) {//新发起订单
				$('#main_search_detail').hide();
				$('#main_edit_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').hide();
				$('#submit_ar_detail').hide();
				// 返回按钮
				$('#btn_close_div').hide();
				//长约审批提交
				$('#query_ar_submmit_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').hide();
				//新发起订单
				$('#main_order_edit_detail').fadeIn(800);
			} else if (flag == 8) {//新发起质押
				$('#main_search_detail').hide();
				$('#main_edit_detail').hide();
				$('#ar_lnk_jrnl_inf_detail').hide();
				$('#submit_ar_detail').hide();
				// 返回按钮
				$('#btn_close_div').hide();
				//长约审批提交
				$('#query_ar_submmit_detail').hide();
				//新发起订单
				$('#main_order_edit_detail').hide();
				//新发起质押
				$('#main_order_edit_detail2').fadeIn(800);
			}
		}
		/***
		 * 重置
		 */
		function reset() {
			E7.resetForm('#frm_query');
		}

		function validate_frm_submit_ar() {
			$('#frm_submit_ar').bootstrapValidator('validate');
			if (!$('#frm_submit_ar').data('bootstrapValidator').isValid()) {
				return;
			} else {
				var nestStepName = "";
				var aplyPsrltCd = "";
				var aplyPsrltCdRadio = document
						.getElementsByName("aplyPsrltCd");
				for (var i = 0; i < aplyPsrltCdRadio.length; i++) {
					if (aplyPsrltCdRadio[i].checked)
						aplyPsrltCd = aplyPsrltCdRadio[i].value;
				}

				if ("01" == aplyPsrltCd) {
					nestStepName = getNextStepName($('#aplyPcstpCd').val(), 1);
					if (null == nestStepName || "" == nestStepName)
						nestStepName = "下一环节";
					$('#saveSubmitModalTips').text(
							"提交后将流转到 [ " + nestStepName + " ] ，确定提交吗?");
				} else if ("02" == aplyPsrltCd) {
					nestStepName = getNextStepName($('#aplyPcstpCd').val(), 2);
					$('#saveSubmitModalTips').text(
							"提交后将退回到 [ " + nestStepName + " ] ，确定提交吗?");
				}
				$('#submitArModal').modal('show');
			}
		}

		function getNextStepName(currStep, flag) {
			// currStep,当前环节；flag，跳转方向1通过，2退回
			var nextStepName = "";
			if ("01" == currStep) {
				if (1 == flag)
					nextStepName = "长约确认(供应链)";
				else if (2 == flag)
					nextStepName = "";
			} else if ("02" == currStep) {
				if (1 == flag)
					nextStepName = "长约确认(融资企业)";
				else if (2 == flag)
					nextStepName = "长约发起（平台）";
			} else if ("03" == currStep) {
				if (1 == flag)
					nextStepName = "确认承保（保险公司）";
				else if (2 == flag)
					nextStepName = "长约确认(供应链)";
			} else if ("04" == currStep) {
				if (1 == flag)
					nextStepName = "长约一审（平台）";
				else if (2 == flag)
					nextStepName = "长约确认(融资企业)";
			} else if ("05" == currStep) {
				if (1 == flag)
					nextStepName = "长约二审（平台）";
				else if (2 == flag)
					nextStepName = "确认承保（保险公司）";
			} else if ("06" == currStep) {
				if (1 == flag)
					nextStepName = "长约终止（平台）";
				else if (2 == flag)
					nextStepName = "长约一审（平台）";
			} else if ("07" == currStep) {
				if (1 == flag)
					nextStepName = "长约结束";
				else if (2 == flag)
					nextStepName = "长约二审（平台）";
			}
			return nextStepName;
		}

		/***
		 * 长约提交
		 */
		function submitAr() {
/* 			for (instance in CKEDITOR.instances) {
				CKEDITOR.instances[instance].updateElement();
			} */
			var formParams = E7.serialForm('#frm_submit_ar');
			E7.post(pageSetting.resetPath + '/submitAr', formParams, function(
					data) {
				showOrHideDetail(true, 1);
				bootbox.alert({
					'title' : "消息",
					'message' : '提交成功！'
				});
				$('#tbl_query').e7table(
						'reload',
						function() {
							if (formParams['id'] != '') {
								$('#tbl_query').e7table('selectById',
										formParams['id']);
							}
						});
			});
		}

		/***
		 * 显示发起对话框
		 */
		function showAddDialog() {
			// 初始化上传附件控件
			initInputItem(1);
			E7.resetForm('#frm_detail');
			//		CKEDITOR.instances.editor1.setData('');
			$('#frm_detail').data('bootstrapValidator').resetForm(true);
			showOrHideDetail(true, 2);
		}

		/***
		 * 表单校验控件初始化2(长约各环节提交)
		 */
		function validator_2_Init() {
			$('#frm_submit_ar').bootstrapValidator({
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
				},
				fields : {
					"aplyPsrltCd" : {
						validators : {
							notEmpty : {
								message : '处理结果不能为空'
							}
						}
					}
				}
			});

			$('#btn_submit_ar').click(function() {
				$('#frm_submit_ar').bootstrapValidator('validate');
			});
		}
		/***
		 * 表单校验控件初始化1（长约发起提交）
		 */
		function validator_1_Init() {
			$('#frm_detail').bootstrapValidator({
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
				},
				fields : {
					"arTp" : {
						validators : {
							notEmpty : {
								message : '长约类型不能为空'
							}
						}
					},
					"fncEntp" : {
						validators : {
							notEmpty : {
								message : '融资企业不能为空'
							}
						}
					},
					"ustrmSplr" : {
						validators : {
							notEmpty : {
								message : '上游供应商不能为空'
							}
						}
					},
					"stgco" : {
						validators : {
							notEmpty : {
								message : '仓储公司不能为空'
							}
						}
					},
					"bnk" : {
						validators : {
							notEmpty : {
								message : '银行不能为空'
							}
						}
					},
					"lgstcCo" : {
						validators : {
							notEmpty : {
								message : '物流公司不能为空'
							}
						}
					},
					"insCo" : {
						validators : {
							notEmpty : {
								message : '保险公司不能为空'
							}
						}
					},
					"splchainCo" : {
						validators : {
							notEmpty : {
								message : '供应链公司不能为空'
							}
						}
					},
					"pckupgdsCyc" : {
						validators : {
							notEmpty : {
								message : '提货周期不能为空'
							},
							number : {
								message : '提货周期只能输入数字'
							}
						}
					},
					"btp" : {
						validators : {
							notEmpty : {
								message : '业务类型不能为空'
							}
						}
					},
					"fncPctg" : {
						validators : {
							notEmpty : {
								message : '融资比例不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"prpyGldRto" : {
						validators : {
							notEmpty : {
								message : '预付金不能为空'
							},
							number : {
								message : '输入只能为数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"lmt" : {
						validators : {
							notEmpty : {
								message : '额度不能为空'
							},
							number : {
								message : '输入只能为数字'
							}
						}
					},
					"crdn" : {
						validators : {
							notEmpty : {
								message : '警戒线不能为空'
							},
							number : {
								message : '输入只能为数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"clsposLn" : {
						validators : {
							notEmpty : {
								message : '平仓线不能为空'
							},
							number : {
								message : '输入只能为数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"svcfeeCmd" : {
						validators : {
							notEmpty : {
								message : '服务费收取方式不能为空'
							}
						}
					},
					"splovCrrovMod" : {
						validators : {
							notEmpty : {
								message : '溢短结转方式不能为空'
							}
						}
					},

					"plchd" : {
						validators : {
							notEmpty : {
								message : '投保人不能为空'
							}
						}
					},
					"plchdAdr" : {
						validators : {
							notEmpty : {
								message : '投保人地址不能为空'
							}
						}
					},
					"insrd" : {
						validators : {
							notEmpty : {
								message : '被保险人不能为空'
							}
						}
					},
					"insrdAdr" : {
						validators : {
							notEmpty : {
								message : '被保险人地址不能为空'
							}
						}
					},
					"fstBenf" : {
						validators : {
							notEmpty : {
								message : '第一受益人不能为空'
							}
						}
					},
					"fstBenfAdr" : {
						validators : {
							notEmpty : {
								message : '第一受益人地址不能为空'
							}
						}
					},
					"insPtyAdr" : {
						validators : {
							notEmpty : {
								message : '保险财产地址不能为空'
							}
						}
					},
					"insObjNm" : {
						validators : {
							notEmpty : {
								message : '保险标的名称不能为空'
							}
						}
					},
					"insAmt" : {
						validators : {
							notEmpty : {
								message : '保险金额不能为空'
							},
							number : {
								message : '输入只能为数字'
							}
						}
					},
					"dctbAmt" : {
						validators : {
							notEmpty : {
								message : '免赔额不能为空'
							},
							number : {
								message : '输入只能为数字'
							}
						}
					},
					"epap" : {
						validators : {
							notEmpty : {
								message : '特别约定不能为空'
							}
						}
					},
					"insStdt" : {
						trigger : "change3", //监听change动作
						validators : {
							notEmpty : {
								message : '保险开始日期不能为空'
							}
						}
					},
					"insEddt" : {
						trigger : "change4", //监听change动作
						validators : {
							notEmpty : {
								message : '保险结束日期不能为空'
							}
						}
					},
					"arStdt" : {
						//    		trigger:"change1", //监听change动作
						validators : {
							notEmpty : {
								message : '长约开始日期不能为空'
							}
						}
					},
					"arEddt" : {
						//  		trigger:"change2", //监听change动作
						validators : {
							notEmpty : {
								message : '长约结束日期不能为空'
							}
						}
					},
					"isNeedIns" : {
						validators : {
							notEmpty : {
								message : '投保类型不能为空'
							}
						}
					}
				}
			});

			$('#btn_save').click(function() {
				$('#frm_detail').bootstrapValidator('validate');
			});
		}

		/***
		 * 表单校验控件初始化3（订单发起）
		 */
		function validator_3_Init() {
			$('#frm_detail_order').bootstrapValidator({
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
				},
				fields : {
					"pdNm" : {
						validators : {
							notEmpty : {
								message : '品名不能为空'
							}
						}
					},
					"spec" : {
						validators : {
							notEmpty : {
								message : '规格不能为空'
							}
						}
					},
					"qlyStd" : {
						validators : {
							notEmpty : {
								message : '质量标准不能为空'
							}
						}
					},
					"ordrStdt" : {
						validators : {
							notEmpty : {
								message : '订单开始日期不能为空'
							}
						}
					},
					"ordrEddt" : {
						validators : {
							notEmpty : {
								message : '订单结束日期不能为空'
							}
						}
					},
					"pymtmod" : {
						validators : {
							notEmpty : {
								message : '付款方式不能为空'
							}
						}
					}, 
					"pchUnitprc" : {
						validators : {
							notEmpty : {
								message : '采购单价不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"wght" : {
						validators : {
							notEmpty : {
								message : '重量不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"pchPymfrgdsTamt" : {
						validators : {
							notEmpty : {
								message : '采购货款总额不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"txnPrcdif" : {
						validators : {
							notEmpty : {
								message : '交易差价不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"saleTntvPrc" : {
						validators : {
							notEmpty : {
								message : '销售暂定价不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
/* 					"fncRto" : {
						validators : {
							notEmpty : {
								message : '融资比率不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					}, */
					"fncAmt" : {
						validators : {
							notEmpty : {
								message : '融资金额不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"ctrTamt" : {
						validators : {
							notEmpty : {
								message : '合同总额不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"prpyGldRto" : {
						validators : {
							notEmpty : {
								message : '预付金不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"rskctrUnitprc" : {
						validators : {
							notEmpty : {
								message : '风控单价不能为空'
							},
							number : {
								message : '只能输入数字'
							}
						}
					},
					"rskctrPrcRef" : {
						validators : {
							notEmpty : {
								message : '风控价格参考不能为空'
							}
						}
					},
					"wnln" : {
						validators : {
							notEmpty : {
								message : '预警线不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"crdn" : {
						validators : {
							notEmpty : {
								message : '警戒线不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"clsposLn" : {
						validators : {
							notEmpty : {
								message : '平仓线不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"splovCrrovMod" : {
						validators : {
							notEmpty : {
								message : '溢短结转方式不能为空'
							}
						}
					},
					"fncSvcfeeRate" : {
						validators : {
							notEmpty : {
								message : '服务费率不能为空'
							},
							number : {
								message : '输入只能为0~100的数字'
							},
							greaterThan : {
								value : 0,
								message : '输入不能小于0'
							},
							lessThan : {
								value : 101,
								message : '输入不能超过100'
							}
						}
					},
					"pymtmod" : {
						validators : {
							notEmpty : {
								message : '付款方式不能为空'
							}
						}
					}
				}
			});

			$('#btn_save').click(function() {
				$('#frm_detail_order').bootstrapValidator('validate');
			});
			$('#btn_save_submmit').click(function() {
				$('#frm_detail_order').bootstrapValidator('validate');
			});
		}
		
		
		
		/***
		 * 表单校验控件初始化4（订单明细）
		 */
		function validator_4_Init() {
			$('#frm_orderDetailModal').bootstrapValidator({
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
				},
				fields : {
					"pdNm" : {
						validators : {
							notEmpty : {
								message : '品名不能为空'
							}
						}
					},
					"spec" : {
						validators : {
							notEmpty : {
								message : '规格不能为空'
							}
						}
					},
					"qlyStd" : {
						validators : {
							notEmpty : {
								message : '质量标准不能为空'
							}
						}
					},
					"pchUnitprc" : {
						validators : {
							notEmpty : {
								message : '采购单价不能为空'
							},
							numeric : {
								message : '只能输入数字'
							}
						}
					},
					"num" : {
						validators : {
							notEmpty : {
								message : '数量不能为空'
							},
							numeric : {
								message : '只能输入数字'
							}
						}
					},
					"txnPrcdif" : {
						validators : {
							notEmpty : {
								message : '交易差价不能为空'
							},
							numeric : {
								message : '只能输入数字'
							}
						}
					},
					"saleTntvPrc" : {
						validators : {
							notEmpty : {
								message : '销售暂定价不能为空'
							},
							numeric : {
								message : '只能输入数字'
							}
						}
					}
				}
			});

			$('#btn_add_order_detail').click(function() {
				$('#frm_orderDetailModal').bootstrapValidator('validate');
			});
			$('#btn_modify_order_detail').click(function() {
				$('#frm_orderDetailModal').bootstrapValidator('validate');
			});
		}

		function show_or_hide_ins_div(flag) {
			if (flag) {
				document.getElementById('ins_div').style.display = "";
			} else {
				document.getElementById('ins_div').style.display = "none";
			}
		}

		//平台 发起订单
		function showAddOrderDialog() {
			var rows = $('#tbl_query').e7table('getSelectedRows');
			var arId = "";
			var arSt = "";
			if (rows.length == 0) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '请选择数据！'
				});
				return;
			} else if (rows.length > 1) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '一次只能修改一条数据！'
				});
				return;
			}

			E7.post(pageSetting.resetPath + '/getDetail', {
				'id' : rows[0]['id']
			}, function(result) {
				fillForm('#frm_detail_order', result.data);
				arId = result.data["arId"];
				arSt = result.data["arSt"];
				// 实时判断长约是否可以修改	
				if (result.data["arSt"] != "07") {
					bootbox.alert({
						'title' : '错误消息',
						'message' : '该长约非执行中长约禁止发起订单！'
					});
					return;
				}

/* 				$('#main_order_edit_detail_title').text(
						"您所在位置 : 长约管理 > 执行中长约 [ " + arId + " ] > 发起订单"); */
				$('#main_order_edit_detail_title').text(
								"您所在位置 : 新发起订单");
				showOrHideDetail(true, 7);

			});
		}
		
		
		//平台、仓储 发起质押
		function showAddOrderDialog2() {
			var rows = $('#tbl_query').e7table('getSelectedRows');
			var arId = "";
			var arSt = "";
			if (rows.length == 0) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '请选择数据！'
				});
				return;
			} else if (rows.length > 1) {
				bootbox.alert({
					'title' : '错误消息',
					'message' : '一次只能修改一条数据！'
				});
				return;
			}

			E7.post(pageSetting.resetPath + '/getDetail', {
				'id' : rows[0]['id']
			}, function(result) {
				fillForm('#frm_detail_order2', result.data);
				arId = result.data["arId"];
				arSt = result.data["arSt"];
				// 实时判断长约是否可以修改	
				if (result.data["arSt"] != "07") {
					bootbox.alert({
						'title' : '错误消息',
						'message' : '该长约非执行中长约禁止发起订单！'
					});
					return;
				}

/* 				$('#main_order_edit_detail_title').text(
						"您所在位置 : 长约管理 > 执行中长约 [ " + arId + " ] > 发起订单"); */
				$('#main_order_edit_detail_title').text(
								"您所在位置 : 出质申请");
				showOrHideDetail(true, 8);

			});
		}
		
		//供应链 发起订单
		function showAddOrderDialog_gyl(id) {
			var arId = "";
			var arSt = "";
			E7.post(pageSetting.resetPath + '/getDetail', {
				'id' : id
			}, function(result) {
				fillForm('#frm_detail_order', result.data);
				arId = result.data["arId"];
				arSt = result.data["arSt"];
				// 实时判断长约是否可以修改	
				if (result.data["arSt"] != "07") {
					bootbox.alert({
						'title' : '错误消息',
						'message' : '该长约非执行中长约禁止发起订单！'
					});
					return;
				}

/* 				$('#main_order_edit_detail_title').text(
						"您所在位置 : 长约管理 > 执行中长约 [ " + arId + " ] > 发起订单"); */
				$('#main_order_edit_detail_title').text(
								"您所在位置 : 新发起订单");
				showOrHideDetail(true, 7);

			});
		}
		// 初始化上传附件控件
		initInputItem(3);

		fillForm = function(frm, data, reset, parent) {
			if (E7.isEmpty(parent)
					&& (E7.getType(reset) == 'undefined' || reset))
				E7.resetForm(frm);
			for ( var key in data) {
				var elName = E7.isEmpty(parent) ? key : (parent + '.' + key);
				var elValue = data[key];

				if (elValue == null)
					continue;
				if (E7.getType(elValue) == 'object') {
					E7.fillForm(frm, elValue, false, elName);
					continue;
				}
				var els = $(frm + ' [name="' + elName + '"]');
				if (els.length == 0)
					continue;
				if (els[0].type == 'radio') {
					$(frm + ' [name="' + elName + '"][value="' + elValue + '"]')
							.prop("checked", true);
				} else if (els[0].type == 'select-multiple') {
					if (elValue instanceof Array) {
						els.val(elValue);
					} else if (typeof elValue == 'string') {
						els.val(elValue.split(','));
					} else if (typeof elValue == 'number') {
						els.val(elValue + '');
					} else {
						els.val(elValue);
					}
				} else if (els[0].type == 'checkbox') {
					if (els.length == 1) {
						if (els.val() == elValue) {
							els.prop('checked', true);
						}
					} else {
						if (elValue instanceof Array) {
							els.val(elValue);
						} else if (typeof elValue == 'string') {
							els.val(elValue.split(','));
						} else if (typeof elValue == 'number') {
							els.val(elValue + '');
						} else {
							els.val(elValue);
						}
					}
				} else if (els[0].id == 'editor1') {
	///				CKEDITOR.instances.editor1.setData(elValue);
				} else {
					els.val(elValue + '');
				}
			}
		}

		/***
		 * 显示发起对话框
		 */
		function pymtmod_change() {
			var pymtmod = $('#pymtmod').val();
			if (("01" == pymtmod) || ("02" == pymtmod)) {
				document.getElementById('ins_order_div').style.display = "";
			} else if ("03" == pymtmod) {
				document.getElementById('ins_order_div').style.display = "none";
			}
		}
		
		
		/***
		 * 添加订单明细到页面表格
		 */
		function addOrderDetail() {				
        var count = 0;
        var preIds = $('#ids').val();
        if("" == preIds || undefined == preIds || null == preIds){
            var all = $('#boot-table').bootstrapTable('getData');
	        for(var i=0;i<all.length;i++){
	        	if(parseInt(all[i]["ids"])>count)
	        		count=all[i]["ids"];
	        }
	        count=parseInt(count)+1;
        } else {
        	// 删除旧的数据行
        	var ids = [];//定义一个数组
        	ids.push(parseInt(preIds));
			$('#boot-table').bootstrapTable('remove', { field: 'ids', values: ids});
			// 修改后的数据序号不变
        	count = preIds;       
        }
        var rows=[];
        rows.push({
        	ids:count,
        	pdNm:$("#pdNm").find("option:selected").text(),
        	spec:$('#spec').val(),
        	modl:$('#modl').val(),
        	qlyStd:$('#qlyStd').val(),
        	brnd:$('#brnd').val(),
        	pdFctr:$('#pdFctr').val(),
        	num:$('#num').val(),
        	msunit:$('#msunit').val(),
        	pchUnitprc:$('#pchUnitprc').val(),
        	txnPrcdif:$('#txnPrcdif').val(),
        	saleTntvPrc:$('#saleTntvPrc').val(),
        	pdId:$('#pdNm').val(),
        	operation:'<a onclick="modifyTr(this)"><i class="glyphicon glyphicon-edit"></i></a>&nbsp &nbsp<a onclick="deleteItem4(this)"><i class="glyphicon glyphicon-trash"></i></a>',       	
        })
        $('#boot-table').bootstrapTable('append', rows);
		$("#boot_table_div").fadeIn(800);
		
		// 计算采购货款总额,并实时更新
		    var all = $('#boot-table').bootstrapTable('getData');
			var sum = 0;
	        for(var i=0;i<all.length;i++){
	        	if((""!=all[i]["pchUnitprc"])&&(""!=all[i]["num"])){
	        		sum += (parseFloat(all[i]["pchUnitprc"]) * parseFloat(all[i]["num"]));
	        	}
	        }
	        $("#pchPymfrgdsTamt").val(sum);
	        
		$("#orderDetailModal").modal("hide");
	}
		
		// 新增行
		function showOrderDetailModal() {
			$('#ids').val("");
			$('#pdNm').val("");
			$('#spec').val("");
			$('#modl').val("");
			$('#qlyStd').val("");
			$('#pdFctr').val("");
			$('#msunit').val("");
			$('#pchUnitprc').val("");
			$('#txnPrcdif').val("");
			$('#saleTntvPrc').val("");
			$('#num').val("");
			$('#brnd').val("");
			$('#pdId').val("");
			// 按钮控制
			$('#btn_modify_order_detail').hide();
			$('#btn_add_order_detail').show();
			$('#orderDetailModal').modal('show');
		}
		// 修改行
		function modifyTr(input) {
			$('#ids').val($(input).parent().parent().find('td').eq(0).text());
			$('#pdNm').val($(input).parent().parent().find('td').eq(1).text());
			$('#spec').val($(input).parent().parent().find('td').eq(2).text());
			$('#modl').val($(input).parent().parent().find('td').eq(3).text());
			$('#qlyStd').val($(input).parent().parent().find('td').eq(4).text());
			$('#pdFctr').val($(input).parent().parent().find('td').eq(5).text());
			$('#msunit').val($(input).parent().parent().find('td').eq(6).text());
			$('#pchUnitprc').val($(input).parent().parent().find('td').eq(7).text());
			$('#txnPrcdif').val($(input).parent().parent().find('td').eq(8).text());
			$('#saleTntvPrc').val($(input).parent().parent().find('td').eq(9).text());
			$('#pdId').val($(input).parent().parent().find('td').eq(10).text());
			// 按钮控制
			$('#btn_modify_order_detail').show();
			$('#btn_add_order_detail').hide();
			$('#orderDetailModal').modal('show');
		}
				
		function deleteItem4(input) {
			var id = $(input).parent().parent().find('td').eq(0).text();
 			var ids = [];//定义一个数组
			ids.push(parseInt(id));
			$('#boot-table').bootstrapTable('remove', { field: 'ids', values: ids});
		}
		
		function delOrderTr(obj){
			 //询问框
		    	layer.confirm('请确认是否要删除？', {
		    		title: ['提示'],btn: ['确定','取消'] //按钮
		    	}, function(){
		    		all='';
		          	$(obj).parent().remove();
		          	layer.closeAll();
		    	}, function(){
		    	});
		     }
		
		// 质押货物明细
			/***
		 * 添加订单明细到页面表格
		 */
		function addOrderDetail2() {				
        var count = 0;
        var preIds = $('#ids2').val();
        if("" == preIds || undefined == preIds || null == preIds){
            var all = $('#boot-table2').bootstrapTable('getData');
	        for(var i=0;i<all.length;i++){
	        	if(parseInt(all[i]["ids"])>count)
	        		count=all[i]["ids"];
	        }
	        count=parseInt(count)+1;
        } else {
        	// 删除旧的数据行
        	var ids = [];//定义一个数组
        	ids.push(parseInt(preIds));
			$('#boot-table2').bootstrapTable('remove', { field: 'ids', values: ids});
			// 修改后的数据序号不变
        	count = preIds;       
        }
        var rows=[];
        rows.push({
        	ids:count,       	
        	pdNm:$("#pdNm2").find("option:selected").text(),
        	spec:$('#spec2').val(),
        	spec:$('#modl2').val(),
        	qlyStd:$('#qlyStd2').val(),
        	brnd:$('#brnd2').val(),
        	pdFctr:$('#pdFctr2').val(),
        	num:$('#num2').val(),
        	msunit:$('#msunit2').val(),
        	pdId:$('#pdNm2').val(),
        	operation:'<a onclick="modifyTr2(this)"><i class="glyphicon glyphicon-edit"></i></a>&nbsp &nbsp<a onclick="deleteItem4(this)"><i class="glyphicon glyphicon-trash"></i></a>',       	
        })
        $('#boot-table2').bootstrapTable('append', rows);
		$("#boot_table_div2").fadeIn(800);
		
		// 计算采购货款总额,并实时更新
		    var all = $('#boot-table').bootstrapTable('getData');
			var sum = 0;
	        for(var i=0;i<all.length;i++){
	        	if((""!=all[i]["pchUnitprc"])&&(""!=all[i]["num"])){
	        		sum += (parseFloat(all[i]["pchUnitprc"]) * parseFloat(all[i]["num"]));
	        	}
	        }
	        $("#pchPymfrgdsTamt").val(sum);
	        
		$("#orderDetailModal").modal("hide");
	}
		
		// 新增行
		function showOrderDetailModal2() {
			$('#ids2').val("");
			$('#pdNm2').val("");
			$('#spec2').val("");
			$('#modl2').val("");
			$('#qlyStd2').val("");
			$('#pdFctr2').val("");
			$('#msunit2').val("");
/* 			$('#pchUnitprc2').val("");
			$('#txnPrcdif2').val("");
			$('#saleTntvPrc2').val(""); */
			$('#num2').val("");
			$('#brnd2').val("");
			$('#pdId2').val("");			
			// 按钮控制
			$('#btn_modify_order_detail2').hide();
			$('#btn_add_order_detail2').show();
			$('#orderDetailModal2').modal('show');
		}
		// 修改行
		function modifyTr2(input) {
			$('#ids2').val($(input).parent().parent().find('td').eq(0).text());
			$('#pdNm2').val($(input).parent().parent().find('td').eq(1).text());
			$('#spec2').val($(input).parent().parent().find('td').eq(2).text());
			$('#modl2').val($(input).parent().parent().find('td').eq(3).text());
			$('#qlyStd2').val($(input).parent().parent().find('td').eq(4).text());
			$('#pdFctr2').val($(input).parent().parent().find('td').eq(5).text());
			$('#msunit2').val($(input).parent().parent().find('td').eq(6).text());
			$('#pchUnitprc2').val($(input).parent().parent().find('td').eq(7).text());
			$('#pdId2').val($(input).parent().parent().find('td').eq(8).text());
 
			/*$('#txnPrcdif2').val($(input).parent().parent().find('td').eq(8).text());
			$('#saleTntvPrc2').val($(input).parent().parent().find('td').eq(9).text()); */
			// 按钮控制
			
			$('#btn_modify_order_detail2').show();
			$('#btn_add_order_detail2').hide();
			$('#orderDetailModal2').modal('show');
		}
		
		function operateFormatter(value, row, index) {
			return "xxxx";
		}
		// 动态计算保证金金额
 		function fncAmt_change(){
			var sum = 0;
			var fncPctg=$("#fncPctg").val();
			var fncAmt=$("#fncAmt").val();
	        	if((""!=fncPctg)&& (""!=fncAmt)){
	        		sum = (parseFloat(fncPctg) * parseFloat(fncAmt)/100);
	        	}
	        $("#fncRto").val(sum);
		} 
		
 		//根据长约id查询订单列表
		function getOrderListByArId(arId) {
				//iframe窗
	 			layer.open({
				type: 2,
				title: '长约 ['+arId+'] 订单列表',
				shadeClose: true,
				shade: true,
				maxmin: true, //开启最大化最小化按钮
				area: ['1024px', '600px'],
				content: '/orderManagement/list_by_ar?arId='+arId
			});
		}
		
		//根据订单id查询发货列表
		function getSpgListByOrderId(orderId) {
				//iframe窗
	 			layer.open({
				type: 2,
				title: '订单 ['+orderId+'] 货物列表',
				shadeClose: true,
				shade: true,
				maxmin: true, //开启最大化最小化按钮
				area: ['1024px', '600px'],
				content: '/spgManagement/list_by_order?ordrId='+orderId
			});
		}
	</script>
</body>
</html>
